!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],e):"object"==typeof exports?exports.ReactBMap=e(require("react"),require("react-dom")):t.ReactBMap=e(t.React,t.ReactDOM)}("undefined"!=typeof self?self:this,function(t,e){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=9)}([function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(1),l=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return r(e,t),a(e,[{key:"bindEvent",value:function(t,e){var n=this;e&&e.forEach(function(e){t.addEventListener(e,function(){n.props.events&&n.props.events[e]&&n.props.events[e].apply(n,arguments)})})}},{key:"bindToggleMeghods",value:function(t,e){for(var n in e)void 0!==this.props[n]&&(this.props[n]?t[e[n][0]]():t[e[n][1]]())}},{key:"getOptions",value:function(t){var e=this,n={};return t.map(function(t){void 0!==e.props[t]&&(n[t]=e.props[t])}),n}},{key:"render",value:function(){return null}}]),e}(s.Component);e.default=l},function(e,n){e.exports=t},function(t,e,n){(function(t){!function(t,n){n(e)}(0,function(e){"use strict";function n(){this._subscribers={}}function o(t){var e=t.split("|");return e[0]=e[0].split(","),{lng:parseFloat(e[0][0]),lat:parseFloat(e[0][1])}}function i(t,e){n.bind(this)(),this._options=e||{},this._data=[],t&&this.add(t)}function r(t,e,n){var o=60*n+30,i=Math.PI/180*o;return[t.x+e*Math.cos(i),t.y+e*Math.sin(i)]}function a(t,e,n,o){for(var i=0;i<6;i++){var a=r({x:e,y:n},o,i);t.lineTo(a[0],a[1])}}function s(t,e){var n;if("undefined"==typeof document);else{var n=document.createElement("canvas");t&&(n.width=t),e&&(n.height=e)}return n}function l(t){t=t||{},this.gradient=t.gradient||{.25:"rgba(0, 0, 255, 1)",.55:"rgba(0, 255, 0, 1)",.85:"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=t.maxSize||35,this.minSize=t.minSize||0,this.max=t.max||100,this.min=t.min||0,this.initPalette()}function u(t){var e=t/2,n=t+e,o=new s(2*n,2*n),i=o.getContext("2d");return i.shadowBlur=e,i.shadowColor="black",i.shadowOffsetX=i.shadowOffsetY=1e4,i.beginPath(),i.arc(n-1e4,n-1e4,t,0,2*Math.PI,!0),i.closePath(),i.fill(),o}function c(t,e,n){for(var o,i=n.maxOpacity||.8,r=3,a=t.length;r<a;r+=4)o=4*t[r],t[r]/256>i&&(t[r]=256*i),t[r-3]=e[o],t[r-2]=e[o+1],t[r-1]=e[o+2]}function p(t,e,n){var o=n.max||100,i=n.min||0,r=n._size;void 0==r&&void 0==(r=n.size)&&(r=13);var a=new l({gradient:n.gradient,max:o,min:i}),s=u(r),c=s.width/2,p=s.height/2,f=e,h={};f.forEach(function(t,e){var n=void 0===t.count?1:t.count,i=Math.min(1,n/o).toFixed(2);h[i]=h[i]||[],h[i].push(t)});for(var d in h)if(!isNaN(d)){var y=h[d];t.beginPath(),n.withoutAlpha||(t.globalAlpha=d),t.strokeStyle=a.getColor(d*o),y.forEach(function(e,i){if(e.geometry){var r=e.geometry._coordinates||e.geometry.coordinates,a=e.geometry.type;if("Point"===a){var l=void 0===e.count?1:e.count;t.globalAlpha=l/o,t.drawImage(s,r[0]-c,r[1]-p)}else if("LineString"===a){var l=void 0===e.count?1:e.count;t.globalAlpha=l/o,t.beginPath(),dt.draw(t,e,n),t.stroke()}}})}}function f(t,e,n){if(!(t.canvas.width<=0||t.canvas.height<=0)){var o=n.strength||.3;t.strokeStyle="rgba(0,0,0,"+o+")";var r=new s(t.canvas.width,t.canvas.height),a=r.getContext("2d");a.scale(vt,vt),n=n||{};var u=e instanceof i?e.get():e;t.save();var f=new l({gradient:n.gradient});if(p(a,u,n),!n.absolute){var h=a.getImageData(0,0,t.canvas.width,t.canvas.height);c(h.data,f.getImageData(),n),t.putImageData(h,0,0),t.restore()}f=null,r=null}}function h(t,e,n){var o=60*n+30,i=Math.PI/180*o;return[t.x+e*Math.cos(i),t.y+e*Math.sin(i)]}function d(t,e,n){var o=t.createShader(n);return t.shaderSource(o,e),t.compileShader(o),o}function y(t,e,n){var o=d(t,e,t.VERTEX_SHADER),i=d(t,n,t.FRAGMENT_SHADER),r=t.createProgram();return t.attachShader(r,o),t.attachShader(r,i),t.linkProgram(r),t.useProgram(r),r}function g(t){var e=document.createElement("canvas"),n=e.getContext("2d");return e.width=1,e.height=1,n.fillStyle=t,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}function v(t,e,n){if(e){var o=y(t,_t,xt);t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE),t.clear(t.COLOR_BUFFER_BIT);var i=t.canvas.width/2,r=t.canvas.height/2,a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a);var s=t.getAttribLocation(o,"a_Position");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.getUniformLocation(o,"u_FragColor"),u=g(n.strokeStyle||"red");t.uniform4f(l,u[0]/255,u[1]/255,u[2]/255,u[3]/255),t.lineWidth(n.lineWidth||1);for(var c=0,p=e.length;c<p;c++){for(var f=e[c].geometry._coordinates,h=[],d=0;d<f.length;d++){var v=f[d],m=(v[0]-i)/i,b=(r-v[1])/r;h.push(m,b)}var w=new Float32Array(h);t.bufferData(t.ARRAY_BUFFER,w,t.STATIC_DRAW),t.drawArrays(t.LINE_STRIP,0,f.length)}}}function m(t,e,n){if(e){var o=y(t,Pt,Mt),i=t.getAttribLocation(o,"a_Position"),r=t.getAttribLocation(o,"a_PointSize"),a=t.getUniformLocation(o,"u_FragColor");t.clear(t.COLOR_BUFFER_BIT);for(var s=t.canvas.width/2,l=t.canvas.height/2,u=[],c=0,p=0;p<e.length;p++){var f=e[p].geometry._coordinates,h=(f[0]-s)/s,d=(l-f[1])/l;h<-1||h>1||d<-1||d>1||(u.push(h,d),c++)}var v=new Float32Array(u),m=c,b=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,b),t.bufferData(t.ARRAY_BUFFER,v,t.STATIC_DRAW),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(i),t.vertexAttrib1f(r,n._size);var w=g(n.fillStyle||"red");t.uniform4f(a,w[0]/255,w[1]/255,w[2]/255,w[3]/255),t.drawArrays(t.POINTS,0,m)}}function b(t,e,n){n=n||2;var o=e&&e.length,i=o?e[0]*n:t.length,r=w(t,0,i,n,!0),a=[];if(!r)return a;var s,l,u,c,p,f,h;if(o&&(r=L(t,e,r,n)),t.length>80*n){s=u=t[0],l=c=t[1];for(var d=n;d<i;d+=n)p=t[d],f=t[d+1],p<s&&(s=p),f<l&&(l=f),p>u&&(u=p),f>c&&(c=f);h=Math.max(u-s,c-l)}return x(r,a,n,s,l,h),a}function w(t,e,n,o,i){var r,a;if(i===G(t,e,n,o)>0)for(r=e;r<n;r+=o)a=H(r,t[r],t[r+1],a);else for(r=n-o;r>=e;r-=o)a=H(r,t[r],t[r+1],a);return a&&F(a,a.next)&&(V(a),a=a.next),a}function _(t,e){if(!t)return t;e||(e=t);var n,o=t;do{if(n=!1,o.steiner||!F(o,o.next)&&0!==I(o.prev,o,o.next))o=o.next;else{if(V(o),(o=e=o.prev)===o.next)return null;n=!0}}while(n||o!==e);return e}function x(t,e,n,o,i,r,a){if(t){!a&&r&&E(t,o,i,r);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,r?M(t,o,i,r):O(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),V(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?(t=k(t,e,n),x(t,e,n,o,i,r,2)):2===a&&S(t,e,n,o,i,r):x(_(t),e,n,o,i,r,1);break}}}function O(t){var e=t.prev,n=t,o=t.next;if(I(e,n,o)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(R(e.x,e.y,n.x,n.y,o.x,o.y,i.x,i.y)&&I(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function M(t,e,n,o){var i=t.prev,r=t,a=t.next;if(I(i,r,a)>=0)return!1;for(var s=i.x<r.x?i.x<a.x?i.x:a.x:r.x<a.x?r.x:a.x,l=i.y<r.y?i.y<a.y?i.y:a.y:r.y<a.y?r.y:a.y,u=i.x>r.x?i.x>a.x?i.x:a.x:r.x>a.x?r.x:a.x,c=i.y>r.y?i.y>a.y?i.y:a.y:r.y>a.y?r.y:a.y,p=A(s,l,e,n,o),f=A(u,c,e,n,o),h=t.nextZ;h&&h.z<=f;){if(h!==t.prev&&h!==t.next&&R(i.x,i.y,r.x,r.y,a.x,a.y,h.x,h.y)&&I(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=p;){if(h!==t.prev&&h!==t.next&&R(i.x,i.y,r.x,r.y,a.x,a.y,h.x,h.y)&&I(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function k(t,e,n){var o=t;do{var i=o.prev,r=o.next.next;!F(i,r)&&N(i,o,o.next,r)&&W(i,r)&&W(r,i)&&(e.push(i.i/n),e.push(o.i/n),e.push(r.i/n),V(o),V(o.next),o=t=r),o=o.next}while(o!==t);return o}function S(t,e,n,o,i,r){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&D(a,s)){var l=q(a,s);return a=_(a,a.next),l=_(l,l.next),x(a,e,n,o,i,r),void x(l,e,n,o,i,r)}s=s.next}a=a.next}while(a!==t)}function L(t,e,n,o){var i,r,a,s,l,u=[];for(i=0,r=e.length;i<r;i++)a=e[i]*o,s=i<r-1?e[i+1]*o:t.length,l=w(t,a,s,o,!1),l===l.next&&(l.steiner=!0),u.push(B(l));for(u.sort(C),i=0;i<u.length;i++)j(u[i],n),n=_(n,n.next);return n}function C(t,e){return t.x-e.x}function j(t,e){if(e=T(t,e)){var n=q(e,t);_(n,n.next)}}function T(t,e){var n,o=e,i=t.x,r=t.y,a=-1/0;do{if(r<=o.y&&r>=o.next.y){var s=o.x+(r-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(s<=i&&s>a){if(a=s,s===i){if(r===o.y)return o;if(r===o.next.y)return o.next}n=o.x<o.next.x?o:o.next}}o=o.next}while(o!==e);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,p=n.y,f=1/0;for(o=n.next;o!==u;)i>=o.x&&o.x>=c&&R(r<p?i:a,r,c,p,r<p?a:i,r,o.x,o.y)&&((l=Math.abs(r-o.y)/(i-o.x))<f||l===f&&o.x>n.x)&&W(o,t)&&(n=o,f=l),o=o.next;return n}function E(t,e,n,o){var i=t;do{null===i.z&&(i.z=A(i.x,i.y,e,n,o)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,z(i)}function z(t){var e,n,o,i,r,a,s,l,u=1;do{for(n=t,t=null,r=null,a=0;n;){for(a++,o=n,s=0,e=0;e<u&&(s++,o=o.nextZ);e++);for(l=u;s>0||l>0&&o;)0===s?(i=o,o=o.nextZ,l--):0!==l&&o?n.z<=o.z?(i=n,n=n.nextZ,s--):(i=o,o=o.nextZ,l--):(i=n,n=n.nextZ,s--),r?r.nextZ=i:t=i,i.prevZ=r,r=i;n=o}r.nextZ=null,u*=2}while(a>1);return t}function A(t,e,n,o,i){return t=32767*(t-n)/i,e=32767*(e-o)/i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function B(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function R(t,e,n,o,i,r,a,s){return(i-a)*(e-s)-(t-a)*(r-s)>=0&&(t-a)*(o-s)-(n-a)*(e-s)>=0&&(n-a)*(r-s)-(i-a)*(o-s)>=0}function D(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!U(t,e)&&W(t,e)&&W(e,t)&&Z(t,e)}function I(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function F(t,e){return t.x===e.x&&t.y===e.y}function N(t,e,n,o){return!!(F(t,e)&&F(n,o)||F(t,o)&&F(n,e))||I(t,e,n)>0!=I(t,e,o)>0&&I(n,o,t)>0!=I(n,o,e)>0}function U(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&N(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function W(t,e){return I(t.prev,t,t.next)<0?I(t,e,t.next)>=0&&I(t,t.prev,e)>=0:I(t,e,t.prev)<0||I(t,t.next,e)<0}function Z(t,e){var n=t,o=!1,i=(t.x+e.x)/2,r=(t.y+e.y)/2;do{n.y>r!=n.next.y>r&&i<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(o=!o),n=n.next}while(n!==t);return o}function q(t,e){var n=new J(t.i,t.x,t.y),o=new J(e.i,e.x,e.y),i=t.next,r=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,o.next=n,n.prev=o,r.next=o,o.prev=r,o}function H(t,e,n,o){var i=new J(t,e,n);return o?(i.next=o.next,i.prev=o,o.next.prev=i,o.next=i):(i.prev=i,i.next=i),i}function V(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function J(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function G(t,e,n,o){for(var i=0,r=e,a=n-o;r<n;r+=o)i+=(t[a]-t[r])*(t[r+1]+t[a+1]),a=r;return i}function Y(t,e,n){if(e){t.clear(t.COLOR_BUFFER_BIT),t.viewport(0,0,t.canvas.width,t.canvas.height);var o=y(t,St,Lt);t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE);var i=t.canvas.width/2,r=t.canvas.height/2;t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,t.createBuffer());var a=t.getAttribLocation(o,"a_Position");t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a);var s=t.getUniformLocation(o,"u_FragColor"),l=g(n.fillStyle||"red");t.uniform4f(s,l[0]/255,l[1]/255,l[2]/255,l[3]/255),t.lineWidth(n.lineWidth||1);for(var u=[],c=[],p=0,f=0,h=e.length;f<h;f++){var d=b.flatten(e[f].geometry._coordinates||e[f].geometry.coordinates),v=d.vertices;p=u.length/2;for(var m=0;m<v.length;m+=2)v[m]=(v[m]-i)/i,v[m+1]=(r-v[m+1])/r;(u.length+v.length)/2>65536&&(t.bufferData(t.ARRAY_BUFFER,new Float32Array(u),t.STATIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),t.STATIC_DRAW),t.drawElements(t.TRIANGLES,c.length,t.UNSIGNED_SHORT,0),u.length=0,c.length=0,p=0);for(var m=0;m<v.length;m++)u.push(v[m]);for(var w=b(v,d.holes,d.dimensions),m=0;m<w.length;m++)c.push(w[m]+p)}t.bufferData(t.ARRAY_BUFFER,new Float32Array(u),t.STATIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),t.STATIC_DRAW),t.drawElements(t.TRIANGLES,c.length,t.UNSIGNED_SHORT,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}}function X(t,e){e=e||{};for(var n=[],o=0;o<t.length-1;o++){var i=K(t[o],t[o+1],e.count);i&&i.length>0&&(n=n.concat(i))}return n}function K(t,e,n){if(!t||!e)return null;var o,i,r,a,s,l,u=function(t){return 1-2*t+t*t},c=function(t){return 2*t-2*t*t},p=function(t){return t*t},f=[],n=n||40,h=0,d=0;if(void 0===e)return void(void 0!==f&&(f=[]));var y=parseFloat(t.lat),g=parseFloat(e.lat),v=parseFloat(t.lng),m=parseFloat(e.lng);for(m>v&&parseFloat(m-v)>180&&v<0&&(v=parseFloat(360+v)),v>m&&parseFloat(v-m)>180&&m<0&&(m=parseFloat(360+m)),0,l=0,g==y?(o=0,i=v-m):m==v?(o=Math.PI/2,i=y-g):(o=Math.atan((g-y)/(m-v)),i=(g-y)/Math.sin(o)),0==l&&(l=o+Math.PI/5),r=i/2,s=r*Math.cos(l)+v,a=r*Math.sin(l)+y,h=0;h<n+1;h++)f.push([v*u(d)+s*c(d)+m*p(d),y*u(d)+a*c(d)+g*p(d)]),d+=1/n;return f}function Q(t){this.splitList=t||{other:1}}function $(t){this.splitList=t||[{start:0,value:"red"}]}function tt(t){this.options=t||{},this.paneName=this.options.paneName||"mapPane",this.context=this.options.context||"2d",this.zIndex=this.options.zIndex||0,this.mixBlendMode=this.options.mixBlendMode||null,this.enableMassClear=this.options.enableMassClear,this._map=t.map,this._lastDrawTime=null,this.show()}function et(t,e){for(var n=0;n<t.length;n++)if(nt(t[n],e))return!0;return!1}function nt(t,e){var n=Math.min(t.ne.x,e.ne.x),o=Math.min(t.sw.y,e.sw.y),i=Math.max(t.sw.x,e.sw.x),r=Math.max(t.ne.y,e.ne.y);return n>i&&o>r}function ot(t){requestAnimationFrame(ot),Bt.update(t)}function it(t){function e(t,e){return function(){e.apply(t)}}this.isAdded_=!1,this.isAnimated_=!1,this.paneName_=it.DEFAULT_PANE_NAME_,this.updateHandler_=null,this.resizeHandler_=null,this.topLeft_=null,this.centerListener_=null,this.resizeListener_=null,this.needsResize_=!0,this.requestAnimationFrameId_=null;var n=document.createElement("canvas");n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.pointerEvents="none",this.canvas=n,this.canvasCssWidth_=300,this.canvasCssHeight_=150,this.resolutionScale_=1,this.repositionFunction_=e(this,this.repositionCanvas_),this.resizeFunction_=e(this,this.resize_),this.requestUpdateFunction_=e(this,this.update_),t&&this.setOptions(t)}var rt=function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)},at=function(t){var e=window.devicePixelRatio||1;t.canvas.width=t.canvas.width*e,t.canvas.height=t.canvas.height*e,t.canvas.style.width=t.canvas.width/e+"px",t.canvas.style.height=t.canvas.height/e+"px",t.scale(e,e)};n.prototype.on=function(t,e){var n=this._subscribers[t];n||(n=[],this._subscribers[t]=n),n.push({callback:e})},n.prototype.off=function(t,e){var n=this._subscribers[t];if(n)for(var o=0;o<n.length;o++)n[o].callback==e&&(n.splice(o,1),o--)},n.prototype._trigger=function(t,e,n){if("*"==t)throw new Error("Cannot trigger event *");var o=[];t in this._subscribers&&(o=o.concat(this._subscribers[t])),"*"in this._subscribers&&(o=o.concat(this._subscribers["*"]));for(var i=0,r=o.length;i<r;i++){var a=o[i];a.callback&&a.callback(t,e,n||null)}};var st={municipalities:[{n:"北京",g:"116.395645,39.929986|12"},{n:"上海",g:"121.487899,31.249162|12"},{n:"天津",g:"117.210813,39.14393|12"},{n:"重庆",g:"106.530635,29.544606|12"}],provinces:[{n:"安徽",g:"117.216005,31.859252|8",cities:[{n:"合肥",g:"117.282699,31.866942|12"},{n:"安庆",g:"117.058739,30.537898|13"},{n:"蚌埠",g:"117.35708,32.929499|13"},{n:"亳州",g:"115.787928,33.871211|13"},{n:"巢湖",g:"117.88049,31.608733|13"},{n:"池州",g:"117.494477,30.660019|14"},{n:"滁州",g:"118.32457,32.317351|13"},{n:"阜阳",g:"115.820932,32.901211|13"},{n:"淮北",g:"116.791447,33.960023|13"},{n:"淮南",g:"117.018639,32.642812|13"},{n:"黄山",g:"118.29357,29.734435|13"},{n:"六安",g:"116.505253,31.755558|13"},{n:"马鞍山",g:"118.515882,31.688528|13"},{n:"宿州",g:"116.988692,33.636772|13"},{n:"铜陵",g:"117.819429,30.94093|14"},{n:"芜湖",g:"118.384108,31.36602|12"},{n:"宣城",g:"118.752096,30.951642|13"}]},{n:"福建",g:"117.984943,26.050118|8",cities:[{n:"福州",g:"119.330221,26.047125|12"},{n:"龙岩",g:"117.017997,25.078685|13"},{n:"南平",g:"118.181883,26.643626|13"},{n:"宁德",g:"119.542082,26.656527|14"},{n:"莆田",g:"119.077731,25.44845|13"},{n:"泉州",g:"118.600362,24.901652|12"},{n:"三明",g:"117.642194,26.270835|14"},{n:"厦门",g:"118.103886,24.489231|12"},{n:"漳州",g:"117.676205,24.517065|12"}]},{n:"甘肃",g:"102.457625,38.103267|6",cities:[{n:"兰州",g:"103.823305,36.064226|12"},{n:"白银",g:"104.171241,36.546682|13"},{n:"定西",g:"104.626638,35.586056|13"},{n:"甘南州",g:"102.917442,34.992211|14"},{n:"嘉峪关",g:"98.281635,39.802397|13"},{n:"金昌",g:"102.208126,38.516072|13"},{n:"酒泉",g:"98.508415,39.741474|13"},{n:"临夏州",g:"103.215249,35.598514|13"},{n:"陇南",g:"104.934573,33.39448|14"},{n:"平凉",g:"106.688911,35.55011|13"},{n:"庆阳",g:"107.644227,35.726801|13"},{n:"天水",g:"105.736932,34.584319|13"},{n:"武威",g:"102.640147,37.933172|13"},{n:"张掖",g:"100.459892,38.93932|13"}]},{n:"广东",g:"113.394818,23.408004|8",cities:[{n:"广州",g:"113.30765,23.120049|12"},{n:"潮州",g:"116.630076,23.661812|13"},{n:"东莞",g:"113.763434,23.043024|12"},{n:"佛山",g:"113.134026,23.035095|13"},{n:"河源",g:"114.713721,23.757251|12"},{n:"惠州",g:"114.410658,23.11354|12"},{n:"江门",g:"113.078125,22.575117|13"},{n:"揭阳",g:"116.379501,23.547999|13"},{n:"茂名",g:"110.931245,21.668226|13"},{n:"梅州",g:"116.126403,24.304571|13"},{n:"清远",g:"113.040773,23.698469|13"},{n:"汕头",g:"116.72865,23.383908|13"},{n:"汕尾",g:"115.372924,22.778731|14"},{n:"韶关",g:"113.594461,24.80296|13"},{n:"深圳",g:"114.025974,22.546054|12"},{n:"阳江",g:"111.97701,21.871517|14"},{n:"云浮",g:"112.050946,22.937976|13"},{n:"湛江",g:"110.365067,21.257463|13"},{n:"肇庆",g:"112.479653,23.078663|13"},{n:"中山",g:"113.42206,22.545178|12"},{n:"珠海",g:"113.562447,22.256915|13"}]},{n:"广西",g:"108.924274,23.552255|7",cities:[{n:"南宁",g:"108.297234,22.806493|12"},{n:"百色",g:"106.631821,23.901512|13"},{n:"北海",g:"109.122628,21.472718|13"},{n:"崇左",g:"107.357322,22.415455|14"},{n:"防城港",g:"108.351791,21.617398|15"},{n:"桂林",g:"110.26092,25.262901|12"},{n:"贵港",g:"109.613708,23.103373|13"},{n:"河池",g:"108.069948,24.699521|14"},{n:"贺州",g:"111.552594,24.411054|14"},{n:"来宾",g:"109.231817,23.741166|14"},{n:"柳州",g:"109.422402,24.329053|12"},{n:"钦州",g:"108.638798,21.97335|13"},{n:"梧州",g:"111.305472,23.485395|13"},{n:"玉林",g:"110.151676,22.643974|14"}]},{n:"贵州",g:"106.734996,26.902826|8",cities:[{n:"贵阳",g:"106.709177,26.629907|12"},{n:"安顺",g:"105.92827,26.228595|13"},{n:"毕节地区",g:"105.300492,27.302612|14"},{n:"六盘水",g:"104.852087,26.591866|13"},{n:"铜仁地区",g:"109.196161,27.726271|14"},{n:"遵义",g:"106.93126,27.699961|13"},{n:"黔西南州",g:"104.900558,25.095148|11"},{n:"黔东南州",g:"107.985353,26.583992|11"},{n:"黔南州",g:"107.523205,26.264536|11"}]},{n:"海南",g:"109.733755,19.180501|9",cities:[{n:"海口",g:"110.330802,20.022071|13"},{n:"白沙",g:"109.358586,19.216056|12"},{n:"保亭",g:"109.656113,18.597592|12"},{n:"昌江",g:"109.0113,19.222483|12"},{n:"儋州",g:"109.413973,19.571153|13"},{n:"澄迈",g:"109.996736,19.693135|13"},{n:"东方",g:"108.85101,18.998161|13"},{n:"定安",g:"110.32009,19.490991|13"},{n:"琼海",g:"110.414359,19.21483|13"},{n:"琼中",g:"109.861849,19.039771|12"},{n:"乐东",g:"109.062698,18.658614|12"},{n:"临高",g:"109.724101,19.805922|13"},{n:"陵水",g:"109.948661,18.575985|12"},{n:"三亚",g:"109.522771,18.257776|12"},{n:"屯昌",g:"110.063364,19.347749|13"},{n:"万宁",g:"110.292505,18.839886|13"},{n:"文昌",g:"110.780909,19.750947|13"},{n:"五指山",g:"109.51775,18.831306|13"}]},{n:"河北",g:"115.661434,38.61384|7",cities:[{n:"石家庄",g:"114.522082,38.048958|12"},{n:"保定",g:"115.49481,38.886565|13"},{n:"沧州",g:"116.863806,38.297615|13"},{n:"承德",g:"117.933822,40.992521|14"},{n:"邯郸",g:"114.482694,36.609308|13"},{n:"衡水",g:"115.686229,37.746929|13"},{n:"廊坊",g:"116.703602,39.518611|13"},{n:"秦皇岛",g:"119.604368,39.945462|12"},{n:"唐山",g:"118.183451,39.650531|13"},{n:"邢台",g:"114.520487,37.069531|13"},{n:"张家口",g:"114.893782,40.811188|13"}]},{n:"河南",g:"113.486804,34.157184|7",cities:[{n:"郑州",g:"113.649644,34.75661|12"},{n:"安阳",g:"114.351807,36.110267|12"},{n:"鹤壁",g:"114.29777,35.755426|13"},{n:"焦作",g:"113.211836,35.234608|13"},{n:"开封",g:"114.351642,34.801854|13"},{n:"洛阳",g:"112.447525,34.657368|12"},{n:"漯河",g:"114.046061,33.576279|13"},{n:"南阳",g:"112.542842,33.01142|13"},{n:"平顶山",g:"113.300849,33.745301|13"},{n:"濮阳",g:"115.026627,35.753298|12"},{n:"三门峡",g:"111.181262,34.78332|13"},{n:"商丘",g:"115.641886,34.438589|13"},{n:"新乡",g:"113.91269,35.307258|13"},{n:"信阳",g:"114.085491,32.128582|13"},{n:"许昌",g:"113.835312,34.02674|13"},{n:"周口",g:"114.654102,33.623741|13"},{n:"驻马店",g:"114.049154,32.983158|13"}]},{n:"黑龙江",g:"128.047414,47.356592|6",cities:[{n:"哈尔滨",g:"126.657717,45.773225|12"},{n:"大庆",g:"125.02184,46.596709|12"},{n:"大兴安岭地区",g:"124.196104,51.991789|10"},{n:"鹤岗",g:"130.292472,47.338666|13"},{n:"黑河",g:"127.50083,50.25069|14"},{n:"鸡西",g:"130.941767,45.32154|13"},{n:"佳木斯",g:"130.284735,46.81378|12"},{n:"牡丹江",g:"129.608035,44.588521|13"},{n:"七台河",g:"131.019048,45.775005|14"},{n:"齐齐哈尔",g:"123.987289,47.3477|13"},{n:"双鸭山",g:"131.171402,46.655102|13"},{n:"绥化",g:"126.989095,46.646064|13"},{n:"伊春",g:"128.910766,47.734685|14"}]},{n:"湖北",g:"112.410562,31.209316|8",cities:[{n:"武汉",g:"114.3162,30.581084|12"},{n:"鄂州",g:"114.895594,30.384439|14"},{n:"恩施",g:"109.517433,30.308978|14"},{n:"黄冈",g:"114.906618,30.446109|14"},{n:"黄石",g:"115.050683,30.216127|13"},{n:"荆门",g:"112.21733,31.042611|13"},{n:"荆州",g:"112.241866,30.332591|12"},{n:"潜江",g:"112.768768,30.343116|13"},{n:"神农架林区",g:"110.487231,31.595768|13"},{n:"十堰",g:"110.801229,32.636994|13"},{n:"随州",g:"113.379358,31.717858|13"},{n:"天门",g:"113.12623,30.649047|13"},{n:"仙桃",g:"113.387448,30.293966|13"},{n:"咸宁",g:"114.300061,29.880657|13"},{n:"襄阳",g:"112.176326,32.094934|12"},{n:"孝感",g:"113.935734,30.927955|13"},{n:"宜昌",g:"111.310981,30.732758|13"}]},{n:"湖南",g:"111.720664,27.695864|7",cities:[{n:"长沙",g:"112.979353,28.213478|12"},{n:"常德",g:"111.653718,29.012149|12"},{n:"郴州",g:"113.037704,25.782264|13"},{n:"衡阳",g:"112.583819,26.898164|13"},{n:"怀化",g:"109.986959,27.557483|13"},{n:"娄底",g:"111.996396,27.741073|13"},{n:"邵阳",g:"111.461525,27.236811|13"},{n:"湘潭",g:"112.935556,27.835095|13"},{n:"湘西州",g:"109.745746,28.317951|14"},{n:"益阳",g:"112.366547,28.588088|13"},{n:"永州",g:"111.614648,26.435972|13"},{n:"岳阳",g:"113.146196,29.378007|13"},{n:"张家界",g:"110.48162,29.124889|13"},{n:"株洲",g:"113.131695,27.827433|13"}]},{n:"江苏",g:"119.368489,33.013797|8",cities:[{n:"南京",g:"118.778074,32.057236|12"},{n:"常州",g:"119.981861,31.771397|12"},{n:"淮安",g:"119.030186,33.606513|12"},{n:"连云港",g:"119.173872,34.601549|12"},{n:"南通",g:"120.873801,32.014665|12"},{n:"苏州",g:"120.619907,31.317987|12"},{n:"宿迁",g:"118.296893,33.95205|13"},{n:"泰州",g:"119.919606,32.476053|13"},{n:"无锡",g:"120.305456,31.570037|12"},{n:"徐州",g:"117.188107,34.271553|12"},{n:"盐城",g:"120.148872,33.379862|12"},{n:"扬州",g:"119.427778,32.408505|13"},{n:"镇江",g:"119.455835,32.204409|13"}]},{n:"江西",g:"115.676082,27.757258|7",cities:[{n:"南昌",g:"115.893528,28.689578|12"},{n:"抚州",g:"116.360919,27.954545|13"},{n:"赣州",g:"114.935909,25.845296|13"},{n:"吉安",g:"114.992039,27.113848|13"},{n:"景德镇",g:"117.186523,29.303563|12"},{n:"九江",g:"115.999848,29.71964|13"},{n:"萍乡",g:"113.859917,27.639544|13"},{n:"上饶",g:"117.955464,28.457623|13"},{n:"新余",g:"114.947117,27.822322|13"},{n:"宜春",g:"114.400039,27.81113|13"},{n:"鹰潭",g:"117.03545,28.24131|13"}]},{n:"吉林",g:"126.262876,43.678846|7",cities:[{n:"长春",g:"125.313642,43.898338|12"},{n:"白城",g:"122.840777,45.621086|13"},{n:"白山",g:"126.435798,41.945859|13"},{n:"吉林",g:"126.564544,43.871988|12"},{n:"辽源",g:"125.133686,42.923303|13"},{n:"四平",g:"124.391382,43.175525|12"},{n:"松原",g:"124.832995,45.136049|13"},{n:"通化",g:"125.94265,41.736397|13"},{n:"延边",g:"129.485902,42.896414|13"}]},{n:"辽宁",g:"122.753592,41.6216|8",cities:[{n:"沈阳",g:"123.432791,41.808645|12"},{n:"鞍山",g:"123.007763,41.118744|13"},{n:"本溪",g:"123.778062,41.325838|12"},{n:"朝阳",g:"120.446163,41.571828|13"},{n:"大连",g:"121.593478,38.94871|12"},{n:"丹东",g:"124.338543,40.129023|12"},{n:"抚顺",g:"123.92982,41.877304|12"},{n:"阜新",g:"121.660822,42.01925|14"},{n:"葫芦岛",g:"120.860758,40.74303|13"},{n:"锦州",g:"121.147749,41.130879|13"},{n:"辽阳",g:"123.172451,41.273339|14"},{n:"盘锦",g:"122.073228,41.141248|13"},{n:"铁岭",g:"123.85485,42.299757|13"},{n:"营口",g:"122.233391,40.668651|13"}]},{n:"内蒙古",g:"114.415868,43.468238|5",cities:[{n:"呼和浩特",g:"111.660351,40.828319|12"},{n:"阿拉善盟",g:"105.695683,38.843075|14"},{n:"包头",g:"109.846239,40.647119|12"},{n:"巴彦淖尔",g:"107.423807,40.76918|12"},{n:"赤峰",g:"118.930761,42.297112|12"},{n:"鄂尔多斯",g:"109.993706,39.81649|12"},{n:"呼伦贝尔",g:"119.760822,49.201636|12"},{n:"通辽",g:"122.260363,43.633756|12"},{n:"乌海",g:"106.831999,39.683177|13"},{n:"乌兰察布",g:"113.112846,41.022363|12"},{n:"锡林郭勒盟",g:"116.02734,43.939705|11"},{n:"兴安盟",g:"122.048167,46.083757|11"}]},{n:"宁夏",g:"106.155481,37.321323|8",cities:[{n:"银川",g:"106.206479,38.502621|12"},{n:"固原",g:"106.285268,36.021523|13"},{n:"石嘴山",g:"106.379337,39.020223|13"},{n:"吴忠",g:"106.208254,37.993561|14"},{n:"中卫",g:"105.196754,37.521124|14"}]},{n:"青海",g:"96.202544,35.499761|7",cities:[{n:"西宁",g:"101.767921,36.640739|12"},{n:"果洛州",g:"100.223723,34.480485|11"},{n:"海东地区",g:"102.085207,36.51761|11"},{n:"海北州",g:"100.879802,36.960654|11"},{n:"海南州",g:"100.624066,36.284364|11"},{n:"海西州",g:"97.342625,37.373799|11"},{n:"黄南州",g:"102.0076,35.522852|11"},{n:"玉树州",g:"97.013316,33.00624|14"}]},{n:"山东",g:"118.527663,36.09929|8",cities:[{n:"济南",g:"117.024967,36.682785|12"},{n:"滨州",g:"117.968292,37.405314|12"},{n:"东营",g:"118.583926,37.487121|12"},{n:"德州",g:"116.328161,37.460826|12"},{n:"菏泽",g:"115.46336,35.26244|13"},{n:"济宁",g:"116.600798,35.402122|13"},{n:"莱芜",g:"117.684667,36.233654|13"},{n:"聊城",g:"115.986869,36.455829|12"},{n:"临沂",g:"118.340768,35.072409|12"},{n:"青岛",g:"120.384428,36.105215|12"},{n:"日照",g:"119.50718,35.420225|12"},{n:"泰安",g:"117.089415,36.188078|13"},{n:"威海",g:"122.093958,37.528787|13"},{n:"潍坊",g:"119.142634,36.716115|12"},{n:"烟台",g:"121.309555,37.536562|12"},{n:"枣庄",g:"117.279305,34.807883|13"},{n:"淄博",g:"118.059134,36.804685|12"}]},{n:"山西",g:"112.515496,37.866566|7",cities:[{n:"太原",g:"112.550864,37.890277|12"},{n:"长治",g:"113.120292,36.201664|12"},{n:"大同",g:"113.290509,40.113744|12"},{n:"晋城",g:"112.867333,35.499834|13"},{n:"晋中",g:"112.738514,37.693362|13"},{n:"临汾",g:"111.538788,36.099745|13"},{n:"吕梁",g:"111.143157,37.527316|14"},{n:"朔州",g:"112.479928,39.337672|13"},{n:"忻州",g:"112.727939,38.461031|12"},{n:"阳泉",g:"113.569238,37.869529|13"},{n:"运城",g:"111.006854,35.038859|13"}]},{n:"陕西",g:"109.503789,35.860026|7",cities:[{n:"西安",g:"108.953098,34.2778|12"},{n:"安康",g:"109.038045,32.70437|13"},{n:"宝鸡",g:"107.170645,34.364081|12"},{n:"汉中",g:"107.045478,33.081569|13"},{n:"商洛",g:"109.934208,33.873907|13"},{n:"铜川",g:"108.968067,34.908368|13"},{n:"渭南",g:"109.483933,34.502358|13"},{n:"咸阳",g:"108.707509,34.345373|13"},{n:"延安",g:"109.50051,36.60332|13"},{n:"榆林",g:"109.745926,38.279439|12"}]},{n:"四川",g:"102.89916,30.367481|7",cities:[{n:"成都",g:"104.067923,30.679943|12"},{n:"阿坝州",g:"102.228565,31.905763|15"},{n:"巴中",g:"106.757916,31.869189|14"},{n:"达州",g:"107.494973,31.214199|14"},{n:"德阳",g:"104.402398,31.13114|13"},{n:"甘孜州",g:"101.969232,30.055144|15"},{n:"广安",g:"106.63572,30.463984|13"},{n:"广元",g:"105.819687,32.44104|13"},{n:"乐山",g:"103.760824,29.600958|13"},{n:"凉山州",g:"102.259591,27.892393|14"},{n:"泸州",g:"105.44397,28.89593|14"},{n:"南充",g:"106.105554,30.800965|13"},{n:"眉山",g:"103.84143,30.061115|13"},{n:"绵阳",g:"104.705519,31.504701|12"},{n:"内江",g:"105.073056,29.599462|13"},{n:"攀枝花",g:"101.722423,26.587571|14"},{n:"遂宁",g:"105.564888,30.557491|12"},{n:"雅安",g:"103.009356,29.999716|13"},{n:"宜宾",g:"104.633019,28.769675|13"},{n:"资阳",g:"104.63593,30.132191|13"},{n:"自贡",g:"104.776071,29.359157|13"}]},{n:"西藏",g:"89.137982,31.367315|6",cities:[{n:"拉萨",g:"91.111891,29.662557|13"},{n:"阿里地区",g:"81.107669,30.404557|11"},{n:"昌都地区",g:"97.185582,31.140576|15"},{n:"林芝地区",g:"94.349985,29.666941|11"},{n:"那曲地区",g:"92.067018,31.48068|14"},{n:"日喀则地区",g:"88.891486,29.269023|14"},{n:"山南地区",g:"91.750644,29.229027|11"}]},{n:"新疆",g:"85.614899,42.127001|6",cities:[{n:"乌鲁木齐",g:"87.564988,43.84038|12"},{n:"阿拉尔",g:"81.291737,40.61568|13"},{n:"阿克苏地区",g:"80.269846,41.171731|12"},{n:"阿勒泰地区",g:"88.137915,47.839744|13"},{n:"巴音郭楞",g:"86.121688,41.771362|12"},{n:"博尔塔拉州",g:"82.052436,44.913651|11"},{n:"昌吉州",g:"87.296038,44.007058|13"},{n:"哈密地区",g:"93.528355,42.858596|13"},{n:"和田地区",g:"79.930239,37.116774|13"},{n:"喀什地区",g:"75.992973,39.470627|12"},{n:"克拉玛依",g:"84.88118,45.594331|13"},{n:"克孜勒苏州",g:"76.137564,39.750346|11"},{n:"石河子",g:"86.041865,44.308259|13"},{n:"塔城地区",g:"82.974881,46.758684|12"},{n:"图木舒克",g:"79.198155,39.889223|13"},{n:"吐鲁番地区",g:"89.181595,42.96047|13"},{n:"五家渠",g:"87.565449,44.368899|13"},{n:"伊犁州",g:"81.297854,43.922248|11"}]},{n:"云南",g:"101.592952,24.864213|7",cities:[{n:"昆明",g:"102.714601,25.049153|12"},{n:"保山",g:"99.177996,25.120489|13"},{n:"楚雄州",g:"101.529382,25.066356|13"},{n:"大理州",g:"100.223675,25.5969|14"},{n:"德宏州",g:"98.589434,24.44124|14"},{n:"迪庆州",g:"99.713682,27.831029|14"},{n:"红河州",g:"103.384065,23.367718|11"},{n:"丽江",g:"100.229628,26.875351|13"},{n:"临沧",g:"100.092613,23.887806|14"},{n:"怒江州",g:"98.859932,25.860677|14"},{n:"普洱",g:"100.980058,22.788778|14"},{n:"曲靖",g:"103.782539,25.520758|12"},{n:"昭通",g:"103.725021,27.340633|13"},{n:"文山",g:"104.089112,23.401781|14"},{n:"西双版纳",g:"100.803038,22.009433|13"},{n:"玉溪",g:"102.545068,24.370447|13"}]},{n:"浙江",g:"119.957202,29.159494|8",cities:[{n:"杭州",g:"120.219375,30.259244|12"},{n:"湖州",g:"120.137243,30.877925|12"},{n:"嘉兴",g:"120.760428,30.773992|13"},{n:"金华",g:"119.652576,29.102899|12"},{n:"丽水",g:"119.929576,28.4563|13"},{n:"宁波",g:"121.579006,29.885259|12"},{n:"衢州",g:"118.875842,28.95691|12"},{n:"绍兴",g:"120.592467,30.002365|13"},{n:"台州",g:"121.440613,28.668283|13"},{n:"温州",g:"120.690635,28.002838|12"},{n:"舟山",g:"122.169872,30.03601|13"}]}],other:[{n:"香港",g:"114.186124,22.293586|11"},{n:"澳门",g:"113.557519,22.204118|13"},{n:"台湾",g:"120.961454,23.80406|8"}]},lt={getProvinceNameByCityName:function(t){for(var e=st.provinces,n=0;n<e.length;n++)for(var o=e[n].n,i=e[n].cities,r=0;r<i.length;r++)if(i[r].n==t)return o;return null},getCenterByCityName:function(t){t=t.replace("市","");for(var e=0;e<st.municipalities.length;e++)if(st.municipalities[e].n==t)return o(st.municipalities[e].g);for(var e=0;e<st.other.length;e++)if(st.other[e].n==t)return o(st.other[e].g);for(var n=st.provinces,e=0;e<n.length;e++){if(n[e].n==t)return o(n[e].g);for(var i=n[e].cities,r=0;r<i.length;r++)if(i[r].n==t)return o(i[r].g)}return null}},ut=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ct=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),pt=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,o)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(o)},ft=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},ht=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};i.prototype=n.prototype,i.prototype.add=function(t,e){if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++){if(t[n].time&&14==t[n].time.length&&"20"==t[n].time.substr(0,2)){var i=t[n].time;t[n].time=new Date(i.substr(0,4)+"-"+i.substr(4,2)+"-"+i.substr(6,2)+" "+i.substr(8,2)+":"+i.substr(10,2)+":"+i.substr(12,2)).getTime()}this._data.push(t[n])}else{if(!(t instanceof Object))throw new Error("Unknown dataType");this._data.push(t)}this._dataCache=JSON.parse(JSON.stringify(this._data))},i.prototype.reset=function(){this._data=JSON.parse(JSON.stringify(this._dataCache))},i.prototype.get=function(t){t=t||{};var e=(new Date,this._data);new Date;if(t.filter){for(var n=[],o=0;o<e.length;o++)t.filter(e[o])&&n.push(e[o]);e=n}return t.transferCoordinate&&(e=this.transferCoordinate(e,t.transferCoordinate,t.fromColumn,t.toColumn)),e},i.prototype.set=function(t){this._set(t),this._trigger("change")},i.prototype._set=function(t){this.clear(),this.add(t)},i.prototype.clear=function(t){this._data=[]},i.prototype.remove=function(t){},i.prototype.update=function(t,e){for(var n=this._data,o=0;o<n.length;o++)if(e){var i=!0;for(var r in e)n[o][r]!=e[r]&&(i=!1);i&&t&&t(n[o])}else t&&t(n[o]);this._dataCache=JSON.parse(JSON.stringify(this._data)),this._trigger("change")},i.prototype.transferCoordinate=function(t,e,n,o){function i(t){for(var n=[],o=0;o<t.length;o++){for(var i=t[o],r=[],a=0;a<i.length;a++)r.push(e(i[a]));n.push(r)}return n}o=o||"_coordinates",n=n||"coordinates";for(var r=0;r<t.length;r++){var a=t[r].geometry,s=a[n];switch(a.type){case"Point":a[o]=e(s);break;case"LineString":for(var l=[],u=0;u<s.length;u++)l.push(e(s[u]));a[o]=l;break;case"Polygon":var l=i(s);a[o]=l;break;case"MultiPolygon":for(var l=[],c=0;c<s.length;c++){var p=s[c],p=i(p);l.push(p)}a[o]=l}}return t},i.prototype.initGeometry=function(t){t?this._data.forEach(function(e){e.geometry=t(e)}):this._data.forEach(function(t){if(!t.geometry)if(t.lng&&t.lat)t.geometry={type:"Point",coordinates:[t.lng,t.lat]};else if(t.city){var e=lt.getCenterByCityName(t.city);e&&(t.geometry={type:"Point",coordinates:[e.lng,e.lat]})}})},i.prototype.getMax=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=parseFloat(e[0][t]),o=1;o<e.length;o++){var i=parseFloat(e[o][t]);i>n&&(n=i)}return n}},i.prototype.getSum=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=0,o=0;o<e.length;o++)e[o][t]&&(n+=parseFloat(e[o][t]));return n}},i.prototype.getMin=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=parseFloat(e[0][t]),o=1;o<e.length;o++){var i=parseFloat(e[o][t]);i<n&&(n=i)}return n}},i.prototype.getUnique=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n={},o=1;o<e.length;o++)n[e[o][t]]=!0;var e=[];for(var i in n)e.push(i);return e}};var dt={drawDataSet:function(t,e,n){for(var o=e instanceof i?e.get():e,r=0,a=o.length;r<a;r++){var s=o[r];this.draw(t,s,n)}},draw:function(t,e,n){var o=e.geometry.type,i=e.geometry._coordinates||e.geometry.coordinates,r=n.symbol||"circle";switch(o){case"Point":var s=e._size||e.size||n._size||n.size||5;"circle"===r?("Point"===n.bigData&&t.moveTo(i[0],i[1]),t.arc(i[0],i[1],s,0,2*Math.PI)):"rect"===r?t.rect(i[0]-s/2,i[1]-s/2,s,s):"honeycomb"===r&&a(t,i[0],i[1],s);break;case"LineString":for(var l=0;l<i.length;l++){var u=i[l][0],c=i[l][1];0==l?t.moveTo(u,c):t.lineTo(u,c)}break;case"Polygon":this.drawPolygon(t,i);break;case"MultiPolygon":for(var p=0;p<i.length;p++){var f=i[p];this.drawPolygon(t,f)}t.closePath();break;default:console.log("type"+o+"is not support now!")}},drawPolygon:function(t,e){for(var n=0;n<e.length;n++){var o=e[n];t.moveTo(o[0][0],o[0][1]);for(var i=1;i<o.length;i++)t.lineTo(o[i][0],o[i][1]);t.lineTo(o[0][0],o[0][1])}}},yt={draw:function(t,e,n){var o=e instanceof i?e.get():e;t.save();for(var r in n)t[r]=n[r];if(n.bigData){t.save(),t.beginPath();for(var a=0,s=o.length;a<s;a++){var l=o[a];dt.draw(t,l,n)}var u=n.bigData;"Point"==u||"Polygon"==u||"MultiPolygon"==u?(t.fill(),(l.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()):"LineString"==u&&t.stroke(),t.restore()}else for(var a=0,s=o.length;a<s;a++){var l=o[a];t.save(),(l.fillStyle||l._fillStyle)&&(t.fillStyle=l.fillStyle||l._fillStyle),(l.strokeStyle||l._strokeStyle)&&(t.strokeStyle=l.strokeStyle||l._strokeStyle);var u=l.geometry.type;t.beginPath(),dt.draw(t,l,n),"Point"==u||"Polygon"==u||"MultiPolygon"==u?(t.fill(),(l.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()):"LineString"==u&&((l.lineWidth||l._lineWidth)&&(t.lineWidth=l.lineWidth||l._lineWidth),t.stroke()),t.restore()}t.restore()}};l.prototype.setMax=function(t){this.max=t||100},l.prototype.setMin=function(t){this.min=t||0},l.prototype.setMaxSize=function(t){this.maxSize=t||35},l.prototype.setMinSize=function(t){this.minSize=t||0},l.prototype.initPalette=function(){var t=this.gradient,e=new s(256,1),n=this.paletteCtx=e.getContext("2d"),o=n.createLinearGradient(0,0,256,1);for(var i in t)o.addColorStop(parseFloat(i),t[i]);n.fillStyle=o,n.fillRect(0,0,256,1)},l.prototype.getColor=function(t){var e=this.getImageData(t);return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]/256+")"},l.prototype.getImageData=function(t){var e=this.paletteCtx.getImageData(0,0,256,1).data;if(void 0===t)return e;var n=this.max,o=this.min;t>n&&(t=n),t<o&&(t=o);var i=4*Math.floor((t-o)/(n-o)*255);return[e[i],e[i+1],e[i+2],e[i+3]]},l.prototype.getSize=function(t){var e=this.max,n=this.min,o=this.maxSize,i=this.minSize;return t>e&&(t=e),t<n&&(t=n),i+(t-n)/(e-n)*(o-i)},l.prototype.getLegend=function(t){var e=this.gradient,n=t.width||20,o=t.height||180,i=new s(n,o),r=i.getContext("2d"),a=r.createLinearGradient(0,o,0,0);for(var l in e)a.addColorStop(parseFloat(l),e[l]);return r.fillStyle=a,r.fillRect(0,0,n,o),i};var gt="undefined"==typeof window?{}:window,vt=gt.devicePixelRatio||1,mt={draw:f},bt={draw:function(t,e,n){t.save();for(var o=e instanceof i?e.get():e,r={},a=n._size||n.size||50,s=n.offset||{x:0,y:0},u=0;u<o.length;u++){var c=o[u].geometry._coordinates||o[u].geometry.coordinates,p=Math.floor((c[0]-s.x)/a)+","+Math.floor((c[1]-s.y)/a);r[p]||(r[p]=0),r[p]+=~~(o[u].count||1)}var f=new l({max:n.max||100,gradient:n.gradient});for(var p in r)p=p.split(","),t.beginPath(),t.rect(p[0]*a+.5+s.x,p[1]*a+.5+s.y,a,a),t.fillStyle=f.getColor(r[p]),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke();if(n.label&&!1!==n.label.show){t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur);for(var p in r){p=p.split(",");var h=r[p],d=t.measureText(h).width;t.fillText(h,p[0]*a+.5+s.x+a/2-d/2,p[1]*a+.5+s.y+a/2+5)}}t.restore()}},wt={draw:function(t,e,n){t.save();var o=e instanceof i?e.get():e;for(var r in n)t[r]=n[r];var a=n.offset||{x:10,y:10},s=n._size||n.size||40;s=s/2/Math.sin(Math.PI/3);for(var u=2*s*Math.sin(Math.PI/3),c=1.5*s,p={},f=0;f<o.length;f++){var d=o[f].geometry._coordinates||o[f].geometry.coordinates,y=(d[1]-a.y)/c,g=Math.round(y),v=(d[0]-a.x)/u-(1&g?.5:0),m=Math.round(v),b=y-g;if(3*Math.abs(b)>1){var w=v-m,_=m+(v<m?-1:1)/2,x=g+(y<g?-1:1),O=v-_,P=y-x;w*w+b*b>O*O+P*P&&(m=_+(1&g?1:-1)/2,g=x)}var M=m+"-"+g,k=p[M];k?k.push(o[f]):(k=p[M]=[o[f]],k.i=m,k.j=g,k.x=(m+(1&g?.5:0))*u,k.y=g*c)}var S=new l({max:n.max||100,maxSize:s,gradient:n.gradient});for(var r in p){var L=p[r];t.beginPath();for(var C=0;C<6;C++){var j=h({x:L.x+a.x,y:L.y+a.y},s,C);t.lineTo(j[0],j[1])}t.closePath();for(var T=0,f=0;f<L.length;f++)T+=L[f].count||1;L.count=T,t.fillStyle=S.getColor(T),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke()}if(n.label&&!1!==n.label.show){t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur);for(var r in p){var L=p[r],E=L.count;E=E<0?E.toFixed(2):~~E;var z=t.measureText(E).width;t.fillText(E,L.x+a.x-z/2,L.y+a.y+5)}}t.restore()}},_t=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),xt=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join(""),Ot={draw:v},Pt=["attribute vec4 a_Position;","attribute float a_PointSize;","void main() {","gl_Position = a_Position;","gl_PointSize = a_PointSize;","}"].join(""),Mt=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join(""),kt={draw:m};b.deviation=function(t,e,n,o){var i=e&&e.length,r=i?e[0]*n:t.length,a=Math.abs(G(t,0,r,n));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(G(t,u,c,n))}var p=0;for(s=0;s<o.length;s+=3){var f=o[s]*n,h=o[s+1]*n,d=o[s+2]*n;p+=Math.abs((t[f]-t[d])*(t[h+1]-t[f+1])-(t[f]-t[h])*(t[d+1]-t[f+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},b.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},o=0,i=0;i<t.length;i++){for(var r=0;r<t[i].length;r++)for(var a=0;a<e;a++)n.vertices.push(t[i][r][a]);i>0&&(o+=t[i-1].length,n.holes.push(o))}return n};var St=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),Lt=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join(""),Ct={draw:Y},jt={draw:function(t,e,n){var o=e instanceof i?e.get():e;o.length>0&&("LineString"==o[0].geometry.type?Ot.draw(t,o,n):"Polygon"==o[0].geometry.type||"MultiPolygon"==o[0].geometry.type?Ct.draw(t,o,n):kt.draw(t,o,n))}},Tt={getPoints:X},Et=function(){function t(t,e){return t.x*e.x+t.y*e.y}function e(t){return{x:O[t.target].x-O[t.source].x,y:O[t.target].y-O[t.source].y}}function n(t){return Math.sqrt(Math.pow(O[t.source].x-O[t.target].x,2)+Math.pow(O[t.source].y-O[t.target].y,2))}function o(t){return Math.sqrt(Math.pow(t.source.x-t.target.x,2)+Math.pow(t.source.y-t.target.y,2))}function i(t){return{x:(O[t.source].x+O[t.target].x)/2,y:(O[t.source].y+O[t.target].y)/2}}function r(t){for(var e=0,n=1;n<S[t].length;n++){e+=a(S[t][n],S[t][n-1])}return e}function a(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function s(t,e){var n=Math.sqrt((e.target.x-e.source.x)*(e.target.x-e.source.x)+(e.target.y-e.source.y)*(e.target.y-e.source.y)),o=((e.source.y-t.y)*(e.source.y-e.target.y)-(e.source.x-t.x)*(e.target.x-e.source.x))/(n*n);return{x:e.source.x+o*(e.target.x-e.source.x),y:e.source.y+o*(e.target.y-e.source.y)}}function l(){for(var t=0;t<M.length;t++)1==j?S[t]=[]:(S[t]=[],S[t].push(O[M[t].source]),S[t].push(O[M[t].target]))}function u(){for(var t=0;t<M.length;t++)k[t]=[]}function c(t){for(var e=[],n=0;n<t.length;n++)O[t[n].source].x!=O[t[n].target].x&&O[t[n].source].y!=O[t[n].target].y&&e.push(t[n]);return e}function p(t,e,n){var o=S[t][e-1],i=S[t][e+1],r=S[t][e],a=o.x-r.x+i.x-r.x,s=o.y-r.y+i.y-r.y;return a*=n,s*=n,{x:a,y:s}}function f(t,e,n){for(var i={x:0,y:0},r=k[t],a=0;a<r.length;a++){var s={x:S[r[a]][e].x-S[t][e].x,y:S[r[a]][e].y-S[t][e].y};if(Math.abs(s.x)>R||Math.abs(s.y)>R){var l=1/Math.pow(o({source:S[r[a]][e],target:S[t][e]}),1);i.x+=s.x*l,i.y+=s.y*l}}return i}function h(t,e,o){for(var i=L/(n(M[t])*(e+1)),r=[{x:0,y:0}],a=1;a<e+1;a++){var s={x:0,y:0},l=p(t,a,i),u=f(t,a,o);s.x=o*(l.x+u.x),s.y=o*(l.y+u.y),r.push(s)}return r.push({x:0,y:0}),r}function d(t){for(var e=0;e<M.length;e++)if(1==t)S[e].push(O[M[e].source]),S[e].push(i(M[e])),S[e].push(O[M[e].target]);else{var n=r(e),o=n/(t+1),s=o,l=[];l.push(O[M[e].source]);for(var u=1;u<S[e].length;u++){for(var c=a(S[e][u],S[e][u-1]);c>s;){var p=s/c,f=S[e][u-1].x,h=S[e][u-1].y;f+=p*(S[e][u].x-S[e][u-1].x),h+=p*(S[e][u].y-S[e][u-1].y),l.push({x:f,y:h}),c-=s,s=o}s-=c}l.push(O[M[e].target]),S[e]=l}}function y(o,i){return Math.abs(t(e(o),e(i))/(n(o)*n(i)))}function g(t,e){var o=(n(t)+n(e))/2;return 2/(o/Math.min(n(t),n(e))+Math.max(n(t),n(e))/o)}function v(t,e){var o=(n(t)+n(e))/2;return o/(o+a({x:(O[t.source].x+O[t.target].x)/2,y:(O[t.source].y+O[t.target].y)/2},{x:(O[e.source].x+O[e.target].x)/2,y:(O[e.source].y+O[e.target].y)/2}))}function m(t,e){var n=s(O[e.source],{source:O[t.source],target:O[t.target]}),o=s(O[e.target],{source:O[t.source],target:O[t.target]}),i={x:(n.x+o.x)/2,y:(n.y+o.y)/2},r={x:(O[t.source].x+O[t.target].x)/2,y:(O[t.source].y+O[t.target].y)/2};return Math.max(0,1-2*a(r,i)/a(n,o))}function b(t,e){return Math.min(m(t,e),m(e,t))}function w(t,e){return y(t,e)*g(t,e)*v(t,e)*b(t,e)}function _(t,e){return w(t,e)>=B}function x(){for(var t=0;t<M.length-1;t++)for(var e=t+1;e<M.length;e++)t!=e&&_(M[t],M[e])&&(k[t].push(e),k[e].push(t))}var O={},M=[],k=[],S=[],L=.1,C=.1,j=1,T=2,E=6,z=70,A=.6666667,B=.6,R=1e-8,D=function(){var t=C,e=z,n=j;l(),u(),d(n),x();for(var o=0;o<E;o++){for(var i=0;i<e;i++){for(var r=[],a=0;a<M.length;a++)r[a]=h(a,n,t);for(var s=0;s<M.length;s++)for(var c=0;c<n+1;c++)S[s][c].x+=r[s][c].x,S[s][c].y+=r[s][c].y}t/=2,n*=2,e*=A,d(n)}return S};return D.nodes=function(t){return 0==arguments.length?O:(O=t,D)},D.edges=function(t){return 0==arguments.length?M:(M=c(t),D)},D.bundling_stiffness=function(t){return 0==arguments.length?L:(L=t,D)},D.step_size=function(t){return 0==arguments.length?C:(C=t,D)},D.cycles=function(t){return 0==arguments.length?E:(E=t,D)},D.iterations=function(t){return 0==arguments.length?z:(z=t,D)},D.iterations_rate=function(t){return 0==arguments.length?A:(A=t,D)},D.subdivision_points_seed=function(t){return 0==arguments.length?P:(P=t,D)},D.subdivision_rate=function(t){return 0==arguments.length?T:(T=t,D)},D.compatbility_threshold=function(t){return 0==arguments.length?compatbility_threshold:(B=t,D)},D};Q.prototype.get=function(t){var e=this.splitList,n=e.other;for(var o in e)if(t==o){n=e[o];break}return n},Q.prototype.generateByDataSet=function(t,e){var n=e||["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],o=t.get();this.splitList={};for(var i=0,r=0;r<o.length&&(void 0===this.splitList[o[r].count]&&(this.splitList[o[r].count]=n[i],i++),!(i>=n.length-1));r++);this.splitList.other=n[n.length-1]},Q.prototype.getLegend=function(t){var e=this.splitList,n=document.createElement("div");n.style.cssText="background:#fff; padding: 5px; border: 1px solid #ccc;";var o="";for(var i in e)o+='<div style="line-height: 19px;" value="'+i+'"><span style="vertical-align: -2px; display: inline-block; width: 30px;height: 19px;background:'+e[i]+';"></span><span style="margin-left: 3px;">'+i+"<span></div>";return n.innerHTML=o,n},$.prototype.get=function(t){for(var e=this.splitList,n=!1,o=0;o<e.length;o++)if((void 0===e[o].start||void 0!==e[o].start&&t>=e[o].start)&&(void 0===e[o].end||void 0!==e[o].end&&t<e[o].end)){n=e[o].value;break}return n},$.prototype.generateByDataSet=function(t){var e=t.getMin("count"),n=t.getMax("count");this.generateByMinMax(e,n)},$.prototype.generateByMinMax=function(t,e){var n=["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],o=Number((e-t)/7);e=Number(e);var i=Number(t);this.splitList=[];for(var r=0;i<e;)this.splitList.push({start:i,end:i+o,value:n[r]}),r++,i+=o},$.prototype.getLegend=function(t){this.splitList};var zt=function(){function t(e,n,o){if(ut(this,t),!e||!n)return console.warn("id 和 type 为必填项"),!1;if("baidu"==n){if(!BMap)return console.warn("请先引入百度地图JS API"),!1}else console.warn("暂不支持你的地图类型");this.type=n;var i=o&&o.center?o.center:[106.962497,38.208726],r=o&&o.zoom?o.zoom:5,a=this.map=new BMap.Map(e,{enableMapClick:!1});a.centerAndZoom(new BMap.Point(i[0],i[1]),r),a.enableScrollWheelZoom(!0),a.setMapStyle({style:"light"})}return ct(t,[{key:"addLayer",value:function(t,e){if("baidu"==this.type)return new mapv.baiduMapLayer(this.map,dataSet,e)}},{key:"getMap",value:function(){return this.map}}]),t}(),At="undefined"==typeof window?{}:window;At.BMap&&(tt.prototype=new BMap.Overlay,tt.prototype.initialize=function(t){this._map=t;var e=this.canvas=document.createElement("canvas");e.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";user-select:none;",e.style.mixBlendMode=this.mixBlendMode,this.adjustSize(),t.getPanes()[this.paneName].appendChild(e);var n=this;return t.addEventListener("resize",function(){n.adjustSize(),n._draw()}),this.canvas},tt.prototype.adjustSize=function(){var t=this._map.getSize(),e=this.canvas,n=this.devicePixelRatio=At.devicePixelRatio||1;e.width=t.width*n,e.height=t.height*n,"2d"==this.context&&e.getContext(this.context).scale(n,n),e.style.width=t.width+"px",e.style.height=t.height+"px"},tt.prototype.draw=function(){var t=this;clearTimeout(t.timeoutID),t.timeoutID=setTimeout(function(){t._draw()},15)},tt.prototype._draw=function(){var t=this._map,e=t.getSize(),n=t.getCenter();if(n){var o=t.pointToOverlayPixel(n);this.canvas.style.left=o.x-e.width/2+"px",this.canvas.style.top=o.y-e.height/2+"px",this.dispatchEvent("draw"),this.options.update&&this.options.update.call(this)}},tt.prototype.getContainer=function(){return this.canvas},tt.prototype.show=function(){this.canvas||this._map.addOverlay(this),this.canvas.style.display="block"},tt.prototype.hide=function(){this.canvas.style.display="none"},tt.prototype.setZIndex=function(t){this.zIndex=t,this.canvas.style.zIndex=this.zIndex},tt.prototype.getZIndex=function(){return this.zIndex});var Bt=Bt||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},update:function(e,n){if(0===t.length)return!1;var o=0;for(e=void 0!==e?e:Bt.now();o<t.length;)t[o].update(e)||n?o++:t.splice(o,1);return!0}}}();"undefined"==typeof window&&void 0!==t?Bt.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?Bt.now=window.performance.now.bind(window.performance):void 0!==Date.now?Bt.now=Date.now:Bt.now=function(){return(new Date).getTime()},Bt.Tween=function(t){var e,n=t,o={},i={},r={},a=1e3,s=0,l=!1,u=!1,c=!1,p=0,f=null,h=Bt.Easing.Linear.None,d=Bt.Interpolation.Linear,y=[],g=null,v=!1,m=null,b=null,w=null;this.to=function(t,e){return i=t,void 0!==e&&(a=e),this},this.start=function(t){Bt.add(this),u=!0,v=!1,f=void 0!==t?t:Bt.now(),f+=p;for(var e in i){if(i[e]instanceof Array){if(0===i[e].length)continue;i[e]=[n[e]].concat(i[e])}void 0!==n[e]&&(o[e]=n[e],o[e]instanceof Array==!1&&(o[e]*=1),r[e]=o[e]||0)}return this},this.stop=function(){return u?(Bt.remove(this),u=!1,null!==w&&w.call(n,n),this.stopChainedTweens(),this):this},this.end=function(){return this.update(f+a),this},this.stopChainedTweens=function(){for(var t=0,e=y.length;t<e;t++)y[t].stop()},this.delay=function(t){return p=t,this},this.repeat=function(t){return s=t,this},this.repeatDelay=function(t){return e=t,this},this.yoyo=function(t){return l=t,this},this.easing=function(t){return h=t,this},this.interpolation=function(t){return d=t,this},this.chain=function(){return y=arguments,this},this.onStart=function(t){return g=t,this},this.onUpdate=function(t){return m=t,this},this.onComplete=function(t){return b=t,this},this.onStop=function(t){return w=t,this},this.update=function(t){var u,w,_;if(t<f)return!0;!1===v&&(null!==g&&g.call(n,n),v=!0),w=(t-f)/a,w=w>1?1:w,_=h(w);for(u in i)if(void 0!==o[u]){var x=o[u]||0,O=i[u];O instanceof Array?n[u]=d(O,_):("string"==typeof O&&(O="+"===O.charAt(0)||"-"===O.charAt(0)?x+parseFloat(O):parseFloat(O)),"number"==typeof O&&(n[u]=x+(O-x)*_))}if(null!==m&&m.call(n,_),1===w){if(s>0){isFinite(s)&&s--;for(u in r){if("string"==typeof i[u]&&(r[u]=r[u]+parseFloat(i[u])),l){var P=r[u];r[u]=i[u],i[u]=P}o[u]=r[u]}return l&&(c=!c),f=void 0!==e?t+e:t+p,!0}null!==b&&b.call(n,n);for(var M=0,k=y.length;M<k;M++)y[M].start(f+a);return!1}return!0}},Bt.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-Bt.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*Bt.Easing.Bounce.In(2*t):.5*Bt.Easing.Bounce.Out(2*t-1)+.5}}},Bt.Interpolation={Linear:function(t,e){var n=t.length-1,o=n*e,i=Math.floor(o),r=Bt.Interpolation.Utils.Linear;return e<0?r(t[0],t[1],o):e>1?r(t[n],t[n-1],n-o):r(t[i],t[i+1>n?n:i+1],o-i)},Bezier:function(t,e){for(var n=0,o=t.length-1,i=Math.pow,r=Bt.Interpolation.Utils.Bernstein,a=0;a<=o;a++)n+=i(1-e,o-a)*i(e,a)*t[a]*r(o,a);return n},CatmullRom:function(t,e){var n=t.length-1,o=n*e,i=Math.floor(o),r=Bt.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(o=n*(1+e))),r(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],o-i)):e<0?t[0]-(r(t[0],t[0],t[1],t[1],-o)-t[0]):e>1?t[n]-(r(t[n],t[n],t[n-1],t[n-1],o-n)-t[n]):r(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],o-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=Bt.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var o=e;o>1;o--)n*=o;return t[e]=n,n}}(),CatmullRom:function(t,e,n,o,i){var r=.5*(n-t),a=.5*(o-e),s=i*i;return(2*e-2*n+r+a)*(i*s)+(-3*e+3*n-2*r-a)*s+r*i+e}}};var Rt={draw:function(t,e,n){var o=e instanceof i?e.get():e;t.save();for(var r in n)t[r]=n[r];var a=n.offset||{x:0,y:0},s=[],l=n._size||n.size;l?t.font="bold "+l+"px Arial":l=12;var u=n.textKey||"text";if(n.textAlign||(t.textAlign="center"),n.textBaseline||(t.textBaseline="middle"),n.avoid)for(var c=0,p=o.length;c<p;c++){var f=o[c].geometry._coordinates||o[c].geometry.coordinates,h=f[0]+a.x,d=f[1]+a.y,y=o[c][u],g=t.measureText(y).width,v=h-g/2,m=d-l/2,b={sw:{x:v,y:m+l},ne:{x:v+g,y:m}};et(s,b)||(s.push(b),v+=g/2,m+=l/2,t.fillText(y,v,m))}else for(var c=0,p=o.length;c<p;c++){var f=o[c].geometry._coordinates||o[c].geometry.coordinates,h=f[0]+a.x,d=f[1]+a.y,y=o[c][u];t.fillText(y,h,d)}t.restore()}},Dt={draw:function(t,e,n){var o=e instanceof i?e.get():e;t.fillStyle="white",t.textAlign="center",t.textBaseline="middle";for(var r=n.offset||{x:0,y:0},a=0,s=o.length;a<s;a++)if(o[a].geometry){var l=o[a].deg||n.deg,u=o[a].icon||n.icon,c=o[a].geometry._coordinates||o[a].geometry.coordinates,p=c[0],f=c[1];l&&(t.save(),t.translate(p,f),t.rotate(l*Math.PI/180),t.translate(-p,-f));var h=n._width||n.width||u.width,d=n._height||n.height||u.height;p=p-h/2+r.x,f=f-d/2+r.y,n.sx&&n.sy&&n.swidth&&n.sheight&&n.width&&n.height?t.drawImage(u,n.sx,n.sy,n.swidth,n.sheight,p,f,h,d):n.width&&n.height?t.drawImage(u,p,f,h,d):t.drawImage(u,p,f),l&&t.restore()}}};"undefined"!=typeof window&&requestAnimationFrame(ot);var It=function(){function t(e,n,o){ut(this,t),n instanceof i||(n=new i(n)),this.dataSet=n,this.map=e}return ct(t,[{key:"getDefaultContextConfig",value:function(){return{globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0,strokeStyle:"#000000",fillStyle:"#000000",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)",lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,lineDashOffset:0,font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic"}}},{key:"initDataRange",value:function(t){var e=this;if(e.intensity=new l({maxSize:e.options.maxSize,minSize:e.options.minSize,gradient:e.options.gradient,max:e.options.max||this.dataSet.getMax("count")}),e.category=new Q(e.options.splitList),e.choropleth=new $(e.options.splitList),void 0===e.options.splitList&&e.category.generateByDataSet(this.dataSet,e.options.color),void 0===e.options.splitList){var n=e.options.min||this.dataSet.getMin("count"),o=e.options.max||this.dataSet.getMax("count");e.choropleth.generateByMinMax(n,o)}}},{key:"getLegend",value:function(t){var e=(this.options.draw,this);return"intensity"==e.options.draw||"heatmap"==e.options.draw?this.intensity.getLegend(t):"category"==e.options.draw?this.category.getLegend(t):void 0}},{key:"processData",value:function(t){var e=this,n=e.options.draw;if("bubble"==n||"intensity"==n||"category"==n||"choropleth"==n||"simple"==n)for(var o=0;o<t.length;o++){var i=t[o];"bubble"==e.options.draw?t[o]._size=e.intensity.getSize(i.count):t[o]._size=void 0;var r="_fillStyle";"LineString"!==t[o].geometry.type&&"stroke"!==e.options.styleType||(r="_strokeStyle"),"intensity"==e.options.draw?t[o][r]=e.intensity.getColor(i.count):"category"==e.options.draw?t[o][r]=e.category.get(i.count):"choropleth"==e.options.draw&&(t[o][r]=e.choropleth.get(i.count))}}},{key:"isEnabledTime",value:function(){var t=this.options.animation;return t&&!(!1===t.enabled)}},{key:"argCheck",value:function(t){"heatmap"==t.draw&&t.strokeStyle&&console.warn("[heatmap] options.strokeStyle is discard, pleause use options.strength [eg: options.strength = 0.1]")}},{key:"drawContext",value:function(t,e,n,o){var i=this;switch(i.options.draw){case"heatmap":mt.draw(t,e,i.options);break;case"grid":case"honeycomb":i.options.offset={x:o.x,y:o.y},"grid"==i.options.draw?bt.draw(t,e,i.options):wt.draw(t,e,i.options);break;case"text":Rt.draw(t,e,i.options);break;case"icon":Dt.draw(t,e,i.options);break;case"clip":t.save(),t.fillStyle=i.options.fillStyle||"rgba(0, 0, 0, 0.5)",t.fillRect(0,0,t.canvas.width,t.canvas.height),yt.draw(t,e,i.options),t.beginPath(),dt.drawDataSet(t,e,i.options),t.clip(),rt(t),t.restore();break;default:"webgl"==i.options.context?jt.draw(i.canvasLayer.canvas.getContext("webgl"),e,i.options):yt.draw(t,e,i.options)}}},{key:"isPointInPath",value:function(t,e){for(var t=this.canvasLayer.canvas.getContext(this.context),n=this.dataSet.get(),o=0;o<n.length;o++){t.beginPath(),dt.draw(t,n[o],this.options);var i=e.x*this.canvasLayer.devicePixelRatio,r=e.y*this.canvasLayer.devicePixelRatio;if(t.isPointInPath(i,r)||t.isPointInStroke(i,r))return n[o]}}},{key:"clickEvent",value:function(t,e){var n=this.isPointInPath(this.getContext(),t);n?this.options.methods.click(n,e):this.options.methods.click(null,e)}},{key:"mousemoveEvent",value:function(t,e){var n=this.isPointInPath(this.getContext(),t);n?this.options.methods.mousemove(n,e):this.options.methods.mousemove(null,e)}},{key:"update",value:function(t,e){var n=this,o=t.options,i=n.options;for(var r in o)i[r]=o[r];n.init(i),!1!==e&&n.draw()}},{key:"setOptions",value:function(t){var e=this;e.dataSet.reset(),e.init(t),e.draw()}},{key:"set",value:function(t){var e=this,n=this.getContext(),o=this.getDefaultContextConfig();for(var i in o)n[i]=o[i];e.init(t.options),e.draw()}},{key:"destroy",value:function(){this.unbindEvent(),this.hide()}},{key:"initAnimator",value:function(){var t=this,e=t.options.animation;if("time"==t.options.draw||t.isEnabledTime()){e.stepsRange||(e.stepsRange={start:this.dataSet.getMin("time")||0,end:this.dataSet.getMax("time")||0}),this.steps={step:e.stepsRange.start},t.animator=new Bt.Tween(this.steps).onUpdate(function(){t._canvasUpdate(this.step)}).repeat(1/0),this.addAnimatorEvent();var n=1e3*e.duration||5e3;t.animator.to({step:e.stepsRange.end},n),t.animator.start()}else t.animator&&t.animator.stop()}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this.animator.stop())}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator&&this.animator.start()}}]),t}(),Ft=function(t){function e(t,n,o){ut(this,e);var i=ht(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o));i.map=t,i.options=o||{},i.dataSet=n;var r=new tt({map:t,zIndex:i.options.zIndex,update:i._canvasUpdate.bind(i)});i.init(i.options),i.canvasLayer=r,i.transferToMercator();var a=i;return n.on("change",function(){a.transferToMercator(),r.draw()}),i.ctx=r.canvas.getContext("2d"),i.start(),i}return ft(e,t),ct(e,[{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),e.options.max&&this.intensity.setMax(e.options.max),e.options.min&&this.intensity.setMin(e.options.min),this.initAnimator()}},{key:"transferToMercator",value:function(){var t=this.map.getMapType().getProjection();if("bd09mc"!==this.options.coordType){var e=this.dataSet.get();e=this.dataSet.transferCoordinate(e,function(e){var n=t.lngLatToPoint({lng:e[0],lat:e[1]});return[n.x,n.y]},"coordinates","coordinates_mercator"),this.dataSet._set(e)}}},{key:"_canvasUpdate",value:function(){var t=this.ctx;if(t){var e=this.map,n=Math.pow(2,18-e.getZoom()),o=e.getMapType().getProjection(),i=o.lngLatToPoint(e.getCenter()),r=new BMap.Pixel(i.x-e.getSize().width/2*n,i.y+e.getSize().height/2*n);rt(t);var a={fromColumn:"bd09mc"==this.options.coordType?"coordinates":"coordinates_mercator",transferCoordinate:function(t){if(t){return[(t[0]-r.x)/n,(r.y-t[1])/n]}}};this.data=this.dataSet.get(a),this.processData(this.data),this.drawAnimation()}}},{key:"drawAnimation",value:function(){var t=this.ctx,e=this.data;if(e){t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, .1)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore(),t.save(),this.options.shadowColor&&(t.shadowColor=this.options.shadowColor),this.options.shadowBlur&&(t.shadowBlur=this.options.shadowBlur),this.options.globalAlpha&&(t.globalAlpha=this.options.globalAlpha),this.options.globalCompositeOperation&&(t.globalCompositeOperation=this.options.globalCompositeOperation);for(var n=this.options,o=0;o<e.length;o++)if("Point"===e[o].geometry.type){t.beginPath();var i=e[o].size||this.options.size,r=e[o].minSize||this.options.minSize||0;void 0===e[o]._size&&(e[o]._size=r),t.arc(e[o].geometry._coordinates[0],e[o].geometry._coordinates[1],e[o]._size,0,2*Math.PI,!0),t.closePath(),e[o]._size++,e[o]._size>i&&(e[o]._size=r),t.lineWidth=1,t.strokeStyle=e[o].strokeStyle||e[o]._strokeStyle||n.strokeStyle||"yellow",t.stroke();var a=e[o].fillStyle||e[o]._fillStyle||n.fillStyle;a&&(t.fillStyle=a,t.fill())}else if("LineString"===e[o].geometry.type){t.beginPath();var s=e[o].size||this.options.size||5,r=e[o].minSize||this.options.minSize||0;void 0===e[o]._index&&(e[o]._index=0);var l=e[o]._index;t.arc(e[o].geometry._coordinates[l][0],e[o].geometry._coordinates[l][1],s,0,2*Math.PI,!0),t.closePath(),e[o]._index++,e[o]._index>=e[o].geometry._coordinates.length&&(e[o]._index=0);var u=e[o].strokeStyle||n.strokeStyle,a=e[o].fillStyle||n.fillStyle||"yellow";t.fillStyle=a,t.fill(),u&&n.lineWidth&&(t.lineWidth=n.lineWidth||1,t.strokeStyle=u,t.stroke())}t.restore()}}},{key:"animate",value:function(){this.drawAnimation();var t=this.options.animateTime||100;this.timeout=setTimeout(this.animate.bind(this),t)}},{key:"start",value:function(){this.stop(),this.animate()}},{key:"stop",value:function(){clearTimeout(this.timeout)}},{key:"unbindEvent",value:function(){}},{key:"hide",value:function(){this.canvasLayer.hide(),this.stop()}},{key:"show",value:function(){this.start()}}]),e}(It),Nt=function(t){function e(t,n,o){ut(this,e);var i=ht(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o)),r=i;o=o||{},i.clickEvent=i.clickEvent.bind(i),i.mousemoveEvent=i.mousemoveEvent.bind(i),r.init(o),r.argCheck(o),r.transferToMercator();var a=i.canvasLayer=new tt({map:t,context:i.context,paneName:o.paneName,mixBlendMode:o.mixBlendMode,enableMassClear:o.enableMassClear,zIndex:o.zIndex,update:function(){r._canvasUpdate()}});return n.on("change",function(){r.transferToMercator(),a.draw()}),i}return ft(e,t),ct(e,[{key:"clickEvent",value:function(t){var n=t.pixel;pt(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.pixel;pt(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"bindEvent",value:function(t){this.unbindEvent();var e=this.map;this.options.methods&&(this.options.methods.click&&(e.setDefaultCursor("default"),e.addEventListener("click",this.clickEvent)),this.options.methods.mousemove&&e.addEventListener("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.removeEventListener("click",this.clickEvent),this.options.methods.mousemove&&e.removeEventListener("mousemove",this.mousemoveEvent))}},{key:"transferToMercator",value:function(){var t=this.map.getMapType().getProjection();if("bd09mc"!==this.options.coordType){var e=this.dataSet.get();e=this.dataSet.transferCoordinate(e,function(e){var n=t.lngLatToPoint({lng:e[0],lat:e[1]});return[n.x,n.y]},"coordinates","coordinates_mercator"),this.dataSet._set(e)}}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e=this,n=e.options.animation,o=this.canvasLayer._map,i=Math.pow(2,18-o.getZoom()),r=o.getMapType().getProjection(),a=r.lngLatToPoint(o.getCenter()),s=new BMap.Pixel(a.x-o.getSize().width/2*i,a.y+o.getSize().height/2*i),l=this.getContext();if(e.isEnabledTime()){if(void 0===t)return void rt(l);"2d"==this.context&&(l.save(),l.globalCompositeOperation="destination-out",l.fillStyle="rgba(0, 0, 0, .1)",l.fillRect(0,0,l.canvas.width,l.canvas.height),l.restore())}else rt(l);if("2d"==this.context)for(var u in e.options)l[u]=e.options[u];else l.clear(l.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&o.getZoom()<e.options.minZoom||e.options.maxZoom&&o.getZoom()>e.options.maxZoom)){var c=1;"2d"!=this.context&&(c=this.canvasLayer.devicePixelRatio);var p={fromColumn:"bd09mc"==e.options.coordType?"coordinates":"coordinates_mercator",transferCoordinate:function(t){return[(t[0]-s.x)/i*c,(s.y-t[1])/i*c]}};void 0!==t&&(p.filter=function(e){var o=n.trails||10;return!!(t&&e.time>t-o&&e.time<t)});var f=e.dataSet.get(p);this.processData(f);var h=o.pointToPixel(new BMap.Point(0,0));"m"==e.options.unit?(e.options.size&&(e.options._size=e.options.size/i),e.options.width&&(e.options._width=e.options.width/i),e.options.height&&(e.options._height=e.options.height/i)):(e.options._size=e.options.size,e.options._height=e.options.height,e.options._width=e.options.width),this.drawContext(l,f,e.options,h),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),e.options.max&&this.intensity.setMax(e.options.max),e.options.min&&this.intensity.setMin(e.options.min),this.initAnimator(),this.bindEvent()}},{key:"addAnimatorEvent",value:function(){this.map.addEventListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addEventListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){this.canvasLayer.draw()}}]),e}(It),Ut="undefined"==typeof window?{}:window;Ut.google&&Ut.google.maps&&(it.prototype=new google.maps.OverlayView,it.DEFAULT_PANE_NAME_="overlayLayer",it.CSS_TRANSFORM_=function(){for(var t=document.createElement("div"),e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<e.length;n++){var o=e[n];if(void 0!==t.style[o])return o}return e[0]}(),it.prototype.requestAnimFrame_=Ut.requestAnimationFrame||Ut.webkitRequestAnimationFrame||Ut.mozRequestAnimationFrame||Ut.oRequestAnimationFrame||Ut.msRequestAnimationFrame||function(t){return Ut.setTimeout(t,1e3/60)},it.prototype.cancelAnimFrame_=Ut.cancelAnimationFrame||Ut.webkitCancelAnimationFrame||Ut.mozCancelAnimationFrame||Ut.oCancelAnimationFrame||Ut.msCancelAnimationFrame||function(t){},it.prototype.setOptions=function(t){void 0!==t.animate&&this.setAnimate(t.animate),void 0!==t.paneName&&this.setPaneName(t.paneName),void 0!==t.updateHandler&&this.setUpdateHandler(t.updateHandler),void 0!==t.resizeHandler&&this.setResizeHandler(t.resizeHandler),void 0!==t.resolutionScale&&this.setResolutionScale(t.resolutionScale),void 0!==t.map&&this.setMap(t.map)},it.prototype.setAnimate=function(t){this.isAnimated_=!!t,this.isAnimated_&&this.scheduleUpdate()},it.prototype.isAnimated=function(){return this.isAnimated_},it.prototype.setPaneName=function(t){this.paneName_=t,this.setPane_()},it.prototype.getPaneName=function(){return this.paneName_},it.prototype.setPane_=function(){if(this.isAdded_){var t=this.getPanes();if(!t[this.paneName_])throw new Error('"'+this.paneName_+'" is not a valid MapPane name.');t[this.paneName_].appendChild(this.canvas)}},it.prototype.setResizeHandler=function(t){this.resizeHandler_=t},it.prototype.setResolutionScale=function(t){"number"==typeof t&&(this.resolutionScale_=t,this.resize_())},it.prototype.setUpdateHandler=function(t){this.updateHandler_=t},it.prototype.onAdd=function(){this.isAdded_||(this.isAdded_=!0,this.setPane_(),this.resizeListener_=google.maps.event.addListener(this.getMap(),"resize",this.resizeFunction_),this.centerListener_=google.maps.event.addListener(this.getMap(),"center_changed",this.repositionFunction_),this.resize_(),this.repositionCanvas_())},it.prototype.onRemove=function(){this.isAdded_&&(this.isAdded_=!1,this.topLeft_=null,this.canvas.parentElement.removeChild(this.canvas),this.centerListener_&&(google.maps.event.removeListener(this.centerListener_),this.centerListener_=null),this.resizeListener_&&(google.maps.event.removeListener(this.resizeListener_),this.resizeListener_=null),this.requestAnimationFrameId_&&(this.cancelAnimFrame_.call(Ut,this.requestAnimationFrameId_),this.requestAnimationFrameId_=null))},it.prototype.resize_=function(){if(this.isAdded_){var t=this.getMap(),e=t.getDiv().offsetWidth,n=t.getDiv().offsetHeight,o=e*this.resolutionScale_,i=n*this.resolutionScale_,r=this.canvas.width,a=this.canvas.height;r===o&&a===i||(this.canvas.width=o,this.canvas.height=i,this.needsResize_=!0,this.scheduleUpdate()),this.canvasCssWidth_===e&&this.canvasCssHeight_===n||(this.canvasCssWidth_=e,this.canvasCssHeight_=n,this.canvas.style.width=e+"px",this.canvas.style.height=n+"px")}},it.prototype.draw=function(){this.repositionCanvas_()},it.prototype.repositionCanvas_=function(){var t=this.getMap(),e=t.getBounds().getNorthEast().lat(),n=t.getCenter(),o=Math.pow(2,t.getZoom()),i=n.lng()-180*this.canvasCssWidth_/(256*o);this.topLeft_=new google.maps.LatLng(e,i);var r=this.getProjection(),a=r.fromLatLngToDivPixel(n),s=-Math.round(this.canvasCssWidth_/2-a.x),l=-Math.round(this.canvasCssHeight_/2-a.y);this.canvas.style[it.CSS_TRANSFORM_]="translate("+s+"px,"+l+"px)",this.scheduleUpdate()},it.prototype.update_=function(){this.requestAnimationFrameId_=null,this.isAdded_&&(this.isAnimated_&&this.scheduleUpdate(),this.needsResize_&&this.resizeHandler_&&(this.needsResize_=!1,this.resizeHandler_()),this.updateHandler_&&this.updateHandler_())},it.prototype.getTopLeft=function(){return this.topLeft_},it.prototype.scheduleUpdate=function(){this.isAdded_&&!this.requestAnimationFrameId_&&(this.requestAnimationFrameId_=this.requestAnimFrame_.call(Ut,this.requestUpdateFunction_))});var Wt=function(t){function e(t,n,o){ut(this,e);var i=ht(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o)),r=i;o=o||{},r.init(o),r.argCheck(o);var a={map:t,animate:!1,updateHandler:function(){r._canvasUpdate()},resolutionScale:resolutionScale};i.canvasLayer=new it(a);return i.clickEvent=i.clickEvent.bind(i),i.mousemoveEvent=i.mousemoveEvent.bind(i),i.bindEvent(),i}return ft(e,t),ct(e,[{key:"clickEvent",value:function(t){var n=t.pixel;pt(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.pixel;pt(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"bindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&(e.setDefaultCursor("default"),e.addListener("click",this.clickEvent)),this.options.methods.mousemove&&e.addListener("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.removeListener("click",this.clickEvent),this.options.methods.mousemove&&e.removeListener("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e=this,n=e.options.animation,o=this.getContext();if(e.isEnabledTime()){if(void 0===t)return void rt(o);"2d"==this.context&&(o.save(),o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.restore())}else rt(o);if("2d"==this.context)for(var r in e.options)o[r]=e.options[r];else o.clear(o.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&s.getZoom()<e.options.minZoom||e.options.maxZoom&&s.getZoom()>e.options.maxZoom)){var a=1;"2d"!=this.context&&(a=this.canvasLayer.devicePixelRatio);var s=this.map,l=s.getProjection(),a=Math.pow(2,s.zoom)*resolutionScale,u=l.fromLatLngToPoint(this.canvasLayer.getTopLeft()),c={transferCoordinate:function(t){var e=new google.maps.LatLng(t[1],t[0]),n=l.fromLatLngToPoint(e),o={x:(n.x-u.x)*a,y:(n.y-u.y)*a};return[o.x,o.y]}};void 0!==t&&(c.filter=function(e){var o=n.trails||10;return!!(t&&e.time>t-o&&e.time<t)});var p=e.dataSet.get(c);this.processData(p);var f=new google.maps.LatLng(0,0),h=l.fromLatLngToPoint(f),d={x:(h.x-u.x)*a,y:(h.y-u.y)*a};"m"==e.options.unit&&e.options.size?e.options._size=e.options.size/zoomUnit:e.options._size=e.options.size,this.drawContext(o,new i(p),e.options,d),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.addListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){self.canvasLayer.draw()}}]),e}(It),Zt={getDataSet:function(t){for(var e=[],n=t.features,o=0;o<n.length;o++){var r=n[o],a=r.geometry,s=r.properties,l={};for(var u in s)l[u]=s[u];l.geometry=a,e.push(l)}return new i(e)}},qt={CSVToArray:function(t,e){e=e||",";for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),o=[[]],i=null;i=n.exec(t);){var r=i[1];r.length&&r!==e&&o.push([]);var a;a=i[2]?i[2].replace(new RegExp('""',"g"),'"'):i[3],o[o.length-1].push(a)}return o},getDataSet:function(t,e){for(var n=this.CSVToArray(t,e||","),o=[],r=n[0],a=1;a<n.length-1;a++){for(var s=n[a],l={},u=0;u<s.length;u++){var c=s[u];"geometry"==r[u]&&(c=JSON.parse(c)),l[r[u]]=c}o.push(l)}return new i(o)}};e.version="2.0.20",e.canvasClear=rt,e.canvasResolutionScale=at,e.canvasDrawSimple=yt,e.canvasDrawHeatmap=mt,e.canvasDrawGrid=bt,e.canvasDrawHoneycomb=wt,e.webglDrawSimple=jt,e.webglDrawPoint=kt,e.webglDrawLine=Ot,e.webglDrawPolygon=Ct,e.utilCityCenter=lt,e.utilCurve=Tt,e.utilForceEdgeBundling=Et,e.utilDataRangeIntensity=l,e.utilDataRangeCategory=Q,e.utilDataRangeChoropleth=$,e.Map=zt,e.baiduMapCanvasLayer=tt,e.baiduMapAnimationLayer=Ft,e.baiduMapLayer=Nt,e.googleMapCanvasLayer=it,e.googleMapLayer=Wt,e.DataSet=i,e.geojson=Zt,e.csv=qt,Object.defineProperty(e,"__esModule",{value:!0})})}).call(e,n(31))},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return r(e,t),a(e,[{key:"componentDidUpdate",value:function(t){this.initialize()}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"destroy",value:function(){this.props.map.removeControl(this.control),this.control=null}},{key:"initialize",value:function(){var t=this.props.map;t&&(this.destroy(),this.control=this.getControl(),t.addControl(this.control))}},{key:"getControl",value:function(){return null}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return r(e,t),a(e,[{key:"componentDidUpdate",value:function(t){this.initialize()}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"destroy",value:function(){this.props.map.removeOverlay(this.overlay),this.overlay=null}},{key:"initialize",value:function(){var t=this.props.map;if(t){this.destroy(),this.overlay=this.getOverlay(),this.bindEvent(this.overlay,this.events),t.addOverlay(this.overlay);var e=this.overlay.getPath();e&&e.length>0&&!0===this.props.autoViewport&&t.setViewport(e,this.props.viewportOptions)}}},{key:"getOverlay",value:function(){return null}},{key:"options",get:function(){return["strokeColor","fillColor","strokeWeight","strokeOpacity","fillOpacity","strokeStyle","enableMassClear","enableEditing","enableClicking"]}},{key:"events",get:function(){return["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"]}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});for(var s=(function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}()),l=n(1),u=o(l),c=n(6),p=n(0),f=o(p),h=n(7),d=o(h),y=n(20),g=o(y),v="//huiyan.baidu.com/cms/react-bmap/markers_new2x_fbb9e99.png",m={simple_red:new BMap.Icon(v,new BMap.Size(21,33),{imageOffset:new BMap.Size(-227,-189),anchor:new BMap.Size(10.5,33),backGroundImageSize:new BMap.Size(300,300)}),simple_blue:new BMap.Icon(v,new BMap.Size(21,33),{imageOffset:new BMap.Size(-227,-225),anchor:new BMap.Size(10.5,33),backGroundImageSize:new BMap.Size(300,300)}),loc_red:new BMap.Icon(v,new BMap.Size(23,35),{imageOffset:new BMap.Size(-200,-189),anchor:new BMap.Size(11.5,35),backGroundImageSize:new BMap.Size(300,300)}),loc_blue:new BMap.Icon(v,new BMap.Size(23,35),{imageOffset:new BMap.Size(-200,-225),anchor:new BMap.Size(11.5,35),backGroundImageSize:new BMap.Size(300,300)}),start:new BMap.Icon(v,new BMap.Size(25,40),{imageOffset:new BMap.Size(-200,-139),anchor:new BMap.Size(12.5,40),backGroundImageSize:new BMap.Size(300,300)}),end:new BMap.Icon(v,new BMap.Size(25,40),{imageOffset:new BMap.Size(-225,-139),anchor:new BMap.Size(12.5,40),backGroundImageSize:new BMap.Size(300,300)})},b=1;b<=10;b++)m["red"+b]=new BMap.Icon(v,new BMap.Size(21,33),{imageOffset:new BMap.Size(0-21*(b-1),0),anchor:new BMap.Size(10.5,16.5),backGroundImageSize:new BMap.Size(300,300)});var w=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return a(e,t),s(e,[{key:"componentDidUpdate",value:function(t){this.initialize()}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"destroy",value:function(){this.marker&&(this.props.map.removeOverlay(this.marker),this.marker=null)}},{key:"initialize",value:function(){var t=this.props.map;if("order_tip"!=this.props.type&&t){this.destroy();var e,n=this.props.icon;if(e=n&&n instanceof BMap.Icon?n:n&&m[n]?m[n]:m.simple_red,"bd09mc"===this.props.coordType)var o=t.getMapType().getProjection(),i=o.pointToLngLat(new BMap.Pixel(this.props.position.lng,this.props.position.lat));else var i=new BMap.Point(this.props.position.lng,this.props.position.lat);if("children"in this.props){this.contentDom=document.createElement("div");var r=this.props.children;(0,c.render)(u.default.createElement("div",null,r),this.contentDom),this.marker=new g.default(i,this.contentDom,this.props.offset),t.addOverlay(this.marker)}else{var a=this.getOptions(this.options);a.icon=e,this.marker=new BMap.Marker(i,a),this.props.isTop&&this.marker.setTop(!0),this.bindEvent(this.marker,this.events),t.addOverlay(this.marker),this.bindToggleMeghods(this.marker,this.toggleMethods)}this.props.autoViewport&&t.setViewport([i],this.props.ViewportOptions)}}},{key:"render",value:function(){return"order_tip"==this.props.type?u.default.createElement(d.default,this.props):null}},{key:"events",get:function(){return["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"]}},{key:"toggleMethods",get:function(){return{enableMassClear:["enableMassClear","disableMassClear"],enableDragging:["enableDragging","disableDragging"]}}},{key:"options",get:function(){return["offset","icon","enableMassClear","enableDragging","enableClicking","raiseOnDrag","draggingCursor","rotation","shadow","title"]}}],[{key:"defaultProps",get:function(){return{}}}]),e}(f.default);e.default=w},function(t,n){t.exports=e},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=n(1),p=o(c),f=n(5),h=o(f),d=n(12),y=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.createMarker=n.createMarker.bind(n),n.state={},n}return s(e,t),u(e,[{key:"componentDidUpdate",value:function(t){JSON.stringify(t.data)!=JSON.stringify(this.props.data)||this.map}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"createMarker",value:function(){var t=this,e=this.props,n=e.position,o=e.num,r=e.rate,a=e.name,s=e.rightModule,u=e.order,c=e.visible,f=void 0===c||c,y=d.bmap.createPoint(n),g=!0;r&&r.indexOf("-")>-1&&(g=!1,r=r.replace(/-/,"")),r&&r.indexOf("+")>-1&&(g=!0,r=r.replace("+","")),0==r.length&&(r="_");var v={display:"flex",justifyContent:"space-between",background:"#FFFFFF",alignItems:"stretch",boxShadow:"0 2px 2px 0 rgba(0, 0, 0, 0.22)",borderRadius:"3px 0 0 3px",minWidth:"155px",minHeight:"50px",marginTop:"-25px"},m={minWidth:"30px",background:"#999999",color:"white",padding:"auto 0",display:"flex",justifyContent:"center",alignItems:"center"};this.props.active&&(m.background="#F5533D"),this.props.leftStyle&&(m=d.obj.merge(m,this.props.leftStyle));var b={flex:"1",padding:"6px",justifyContent:"center",alignItems:"center",fontSize:"12px",color:"#8D93A3",letterSpacing:"0.6px"},w=Object.keys(t.props).filter(function(t){return 0==t.indexOf("on")}),_=[];if(w.map(function(e){_.push(i({},e,t.props[e]))}),f)return p.default.createElement(h.default,{key:JSON.stringify(y)+Math.random(),map:this.props.map,position:y},p.default.createElement("div",l({key:JSON.stringify(y)+Math.random(),style:v},_),p.default.createElement("div",{style:m},u),p.default.createElement("div",{style:b},!s&&p.default.createElement("div",null,"  ",o+"("+r,g?p.default.createElement("img",{style:{width:"8px",height:"auto",margin:"1px"},src:"//huiyan.baidu.com/cms/react-bmap/up.png"}):p.default.createElement("img",{style:{width:"8px",height:"auto",margin:"1px"},src:"//huiyan.baidu.com/cms/react-bmap/down.png"}),")"),s?p.default.createElement("div",null,"  ",s," "):p.default.createElement("div",null,"  ",a," "))))}},{key:"render",value:function(){return this.createMarker()}}],[{key:"defaultProps",get:function(){return{autoViewport:!0}}}]),e}(p.default.Component);e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=void 0,o=void 0;try{if("string"==typeof t){var i=t.split(",");n=JSON.parse(i[0].match(/[0-9]+\.?[0-9]{0,}/)[0]),o=JSON.parse(i[1].match(/[0-9]+\.?[0-9]{0,}/)[0])}else t instanceof Array?(n=JSON.parse(t[0]),o=JSON.parse(t[1])):t instanceof Object&&(n=t.lng,o=t.lat);if(e)return{lng:n,lat:o};return new BMap.Point(n,o)}catch(t){console.log("create BmapPoint error",'Please input data like this:  1. "114.54,40.33",  2.[114.54,40.33],  3.{lng:114.54,lat:40.33}')}};e.default=o},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(10);Object.defineProperty(e,"Map",{enumerable:!0,get:function(){return o(i).default}});var r=n(5);Object.defineProperty(e,"Marker",{enumerable:!0,get:function(){return o(r).default}});var a=n(7);Object.defineProperty(e,"MarkerOrderTip",{enumerable:!0,get:function(){return o(a).default}});var s=n(21);Object.defineProperty(e,"InfoWindow",{enumerable:!0,get:function(){return o(s).default}});var l=n(22);Object.defineProperty(e,"NavigationControl",{enumerable:!0,get:function(){return o(l).default}});var u=n(23);Object.defineProperty(e,"OverviewMapControl",{enumerable:!0,get:function(){return o(u).default}});var c=n(24);Object.defineProperty(e,"ScaleControl",{enumerable:!0,get:function(){return o(c).default}});var p=n(25);Object.defineProperty(e,"MapTypeControl",{enumerable:!0,get:function(){return o(p).default}});var f=n(26);Object.defineProperty(e,"PanoramaControl",{enumerable:!0,get:function(){return o(f).default}});var h=n(27);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return o(h).default}});var d=n(28);Object.defineProperty(e,"Polyline",{enumerable:!0,get:function(){return o(d).default}});var y=n(29);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return o(y).default}});var g=n(30);Object.defineProperty(e,"Road",{enumerable:!0,get:function(){return o(g).default}});var v=n(34);Object.defineProperty(e,"Boundary",{enumerable:!0,get:function(){return o(v).default}});var m=n(35);Object.defineProperty(e,"MarkerList",{enumerable:!0,get:function(){return o(m).default}});var b=n(37);Object.defineProperty(e,"MapvMarkerList",{enumerable:!0,get:function(){return o(b).default}});var w=n(38);Object.defineProperty(e,"TrafficLayer",{enumerable:!0,get:function(){return o(w).default}});var _=n(39);Object.defineProperty(e,"Merge",{enumerable:!0,get:function(){return o(_).default}});var x=n(40);Object.defineProperty(e,"MapvLayer",{enumerable:!0,get:function(){return o(x).default}});var O=n(41);Object.defineProperty(e,"DrivingRoute",{enumerable:!0,get:function(){return o(O).default}});var P=n(42);Object.defineProperty(e,"PointLabel",{enumerable:!0,get:function(){return o(P).default}});var M=n(45);Object.defineProperty(e,"Arc",{enumerable:!0,get:function(){return o(M).default}});var k=n(46);Object.defineProperty(e,"ThickRay",{enumerable:!0,get:function(){return o(k).default}})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=o(l),c=n(0),p=o(c),f=n(11),h=function(t){function e(t){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"componentDidMount",value:function(){this.initMap(),this.forceUpdate()}},{key:"componentDidUpdate",value:function(t){var e=t.center,n=this.props.center;if((0,f.isString)(n))e!=n&&this.map.centerAndZoom(n);else{var o=e&&n&&e.lng!=n.lng||e.lat!=n.lat||this.props.forceUpdate,i=t.zoom!==this.props.zoom&&this.props.zoom||this.props.forceUpdate,n=new BMap.Point(n.lng,n.lat);o&&i?this.map.centerAndZoom(n,this.props.zoom):o?this.map.setCenter(n):i&&this.map.zoomTo(this.props.zoom)}}},{key:"initMap",value:function(){var t=this,e=this.options;e=this.getOptions(e),!0!==this.props.enableMapClick&&(e.enableMapClick=!1);var n=new BMap.Map(this.refs.map,e);this.map=n,this.props.mapStyle&&n.setMapStyle(this.props.mapStyle);var o=this.props.zoom;if(this.bindEvent(n,this.events),(0,f.isString)(this.props.center))n.centerAndZoom(this.props.center);else{var i=new BMap.Point(this.props.center.lng,this.props.center.lat);n.centerAndZoom(i,o)}this.bindToggleMeghods(n,this.toggleMethods);var r=o;n.addEventListener("zoomend",function(){var e=n.getZoom();t.props.zoom_changed&&t.props.zoom_changed(e,r),r=e})}},{key:"renderChildren",value:function(){var t=this,e=this.props.children;if(e&&this.map)return u.default.Children.map(e,function(e){if(e)return"string"==typeof e.type?e:u.default.cloneElement(e,{map:t.map})})}},{key:"onRender",value:function(){if(this.props.render&&this.map)return this.props.render(this.map)}},{key:"render",value:function(){var t={height:"100%",position:"relative"};for(var e in this.props.style)t[e]=this.props.style[e];return u.default.createElement("div",{style:t,key:this.props.key},u.default.createElement("div",{ref:"map",className:this.props.className,style:{height:"100%"}},"加载地图中..."),this.renderChildren(),this.onRender())}},{key:"events",get:function(){return["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"]}},{key:"toggleMethods",get:function(){return{enableScrollWheelZoom:["enableScrollWheelZoom","disableScrollWheelZoom"],enableDragging:["enableDragging","disableDragging"],enableDoubleClickZoom:["enableDoubleClickZoom","disableDoubleClickZoom"],enableKeyboard:["enableKeyboard","disableKeyboard"],enableInertialDragging:["enableInertialDragging","disableInertialDragging"],enableContinuousZoom:["enableContinuousZoom","disableContinuousZoom"],enablePinchToZoom:["enablePinchToZoom","disablePinchToZoom"],enableAutoResize:["enableAutoResize","disableAutoResize"]}}},{key:"options",get:function(){return["minZoom","maxZoom","mapType","enableMapClick"]}}],[{key:"defaultProps",get:function(){return{style:{height:"350px"}}}}]),e}(p.default);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(13);Object.defineProperty(e,"obj",{enumerable:!0,get:function(){return o(i).default}});var r=n(16);Object.defineProperty(e,"bmap",{enumerable:!0,get:function(){return o(r).default}});var a=n(18);Object.defineProperty(e,"http",{enumerable:!0,get:function(){return o(a).default}})},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),r=o(i),a=n(15),s=o(a),l={deepClone:r.default,merge:s.default};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){var e=Object.getPrototypeOf(t);return Object.assign({},Object.create(e),t)};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t,e){var n=JSON.parse(JSON.stringify(t));return function t(e,n){for(var i in n)"object"==o(n[i])?("object"!==o(e[i])&&(e[i]={}),t(e[i],n[i])):e[i]=n[i]}(n,e),n};e.default=i},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),r=o(i),a=n(17),s=o(a),l={createPoint:r.default,getPoints:s.default};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),i=function(t){return t&&t.__esModule?t:{default:t}}(o),r=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];return t.split("|").forEach(function(t){for(var o=t?t.split(","):[],r=[],a=0;a<o.length-1;){var s={lng:parseFloat(o[a]),lat:parseFloat(o[a+1])};if(e)r.push(s);else{var l=(0,i.default)(s);r.push(l)}a+=2}n.push(r)}),1==n.length&&(n=n[0]),n};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),i=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=i.default},function(t,e,n){"use strict";function o(t){var e=null;if(/^http(s{0,1}):\/\//.test(t.url)){var n=location.href.match(/^https{0,1}:\/\/(.+?)(?=\/|$)/),o=t.url.match(/^https{0,1}:\/\/(.+?)(?=\/|$)/);e=2===n.length&&2===o.length&&o[1]===n[1]?this.ajax(t):this.jsonp(t)}else e=this.ajax(t);return e}function i(t){var e=this,n=new XMLHttpRequest,o=t.method||"GET",i=!1;if(n.open(o,t.url),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.withCredentials=!0,"GET"===o)n.send();else{n.withCredentials=!0,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var r=Object.keys(t.data).map(function(e){return e+"="+t.data[e]});n.send(r.join("&"))}var a=setTimeout(function(){n.abort(),t.fail&&t.fail("timeout")},1e4);return n.onload=function(){this.status>=200&&this.status<300?t.success&&t.success(JSON.parse(this.response)):t.fail&&t.fail(this.statusText),t.complete&&t.complete(JSON.parse(this.response)),clearTimeout(a)},n.onerror=function(){t.fail&&t.fail(e.statusText),clearTimeout(a)},{abort:function(){i||(i=!0,n.abort())},params:t}}function r(t){var e="jsonp_"+ +new Date+"_"+parseInt(1e7*Math.random(),10),n=document.createElement("script"),o=!1;t.url+="-1"===t.url.indexOf("?")?"?":"&",t.url+="callback="+e,n.src=t.url,document.head.appendChild(n);var i=setTimeout(function(){null!==window[e]&&(window[e]=null,n.parentElement.removeChild(n),t.fail&&t.fail({error:null,msg:"timeout"}),t.complete&&t.complete(JSON.parse()))},1e4);return n.addEventListener("error",function(r){window[e]=null,n.parentElement.removeChild(n),clearTimeout(i),o||(t.fail&&t.fail({error:r,msg:"loaderror"}),t.complete&&t.complete())}),window[e]=function(r){clearTimeout(i),o||(t.success(r),t.complete&&t.complete()),window[e]=null,n.parentElement.removeChild(n)},{abort:function(){clearTimeout(i),o=!0},params:t}}Object.defineProperty(e,"__esModule",{value:!0});var a={fetch:o,ajax:i,jsonp:r,test:function(){console.log("test kits-js http")}};e.default=a},function(t,e,n){"use strict";function o(t,e,n){this._point=t,this.content=e,this.offset=n||new BMap.Size(0,0)}Object.defineProperty(e,"__esModule",{value:!0}),o.prototype=new BMap.Overlay,o.prototype.initialize=function(t){this._map=t;var e=this._div=document.createElement("div");return e.setAttribute("tag","customoverlay"),e.style.position="absolute",e.style.zIndex=BMap.Overlay.getZIndex(this._point.lat),e.addEventListener("touchstart",function(t){t.stopPropagation(),console.log("touchstart")}),e.addEventListener("touchend",function(t){t.stopPropagation(),console.log("touchend")}),"[object String]"==Object.prototype.toString.call(this.content)?e.innerHTML=this.content:e.appendChild(this.content),t.getPanes().labelPane.appendChild(e),e},o.prototype.draw=function(){var t=this._map,e=t.pointToOverlayPixel(this._point);this._div.style.left=e.x+this.offset.width+"px",this._div.style.top=e.y+this.offset.height+"px"},e.default=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return r(e,t),a(e,[{key:"componentDidUpdate",value:function(t){this.initialize()}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"destroy",value:function(){this.props.map.closeInfoWindow(),this.infoWindow=null}},{key:"initialize",value:function(){var t=this.props.map;if(t){this.destroy();this.infoWindow=new BMap.InfoWindow(this.props.text,this.getOptions(this.options)),this.bindEvent(this.infoWindow,this.events),t.openInfoWindow(this.infoWindow,new BMap.Point(this.props.position.lng,this.props.position.lat))}}},{key:"options",get:function(){return["width","height","maxWidth","offset","title","enableAutoPan","enableCloseOnClick","enableMessage","message"]}},{key:"events",get:function(){return["close","open","maximize","restore","clickclose"]}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(3),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return r(e,t),a(e,[{key:"getControl",value:function(){return new BMap.NavigationControl(this.getOptions(this.options))}},{key:"options",get:function(){return["anchor","offset","type","showZoomInfo","enableGeolocation"]}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(3),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return r(e,t),a(e,[{key:"getControl",value:function(){return new BMap.OverviewMapControl(this.getOptions(this.options))}},{key:"options",get:function(){return["anchor","offset","size","isOpen"]}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(3),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return r(e,t),a(e,[{key:"getControl",value:function(){return new BMap.ScaleControl(this.getOptions(this.options))}},{key:"options",get:function(){return["anchor","offset"]}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(3),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return r(e,t),a(e,[{key:"getControl",value:function(){return new BMap.MapTypeControl(this.getOptions(this.options))}},{key:"options",get:function(){return["anchor","offset","type","mapTypes"]}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(3),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return r(e,t),a(e,[{key:"getControl",value:function(){return new BMap.PanoramaControl(this.getOptions(this.options))}},{key:"options",get:function(){return["anchor","offset"]}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(4),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return r(e,t),a(e,[{key:"getOverlay",value:function(){var t=this.props.center,e=this.props.radius;return new BMap.Circle(t,e,this.getOptions(this.options))}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(4),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return r(e,t),a(e,[{key:"getOverlay",value:function(){var t=this.props.path;return t=t.map(function(t){return new BMap.Point(t.lng,t.lat)}),new BMap.Polyline(t,this.getOptions(this.options))}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(4),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return r(e,t),a(e,[{key:"getOverlay",value:function(){var t=this.props.path;return t=t.map(function(t){return new BMap.Point(t.lng,t.lat)}),new BMap.Polygon(t,this.getOptions(this.options))}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(0),u=o(l),c=n(2),p=n(32),f=o(p),h=n(33),d=o(h),y=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return a(e,t),s(e,[{key:"componentDidUpdate",value:function(t){this.initialize()}},{key:"getRoadPoints",value:function(t){for(var e=this.props.map.getMapType().getProjection(),n=[],o=0;o<t.length;o++)for(var i=t[o].split(","),r=0;r<i.length;r+=2)"bd09mc"===this.props.coordType?n.push(e.pointToLngLat(new BMap.Pixel(i[r],i[r+1]))):n.push(new BMap.Point(i[r],i[r+1]));return n}},{key:"updateViewport",value:function(){var t=this,e=(this.props.roadPath,[]);this.props.roadPaths?this.props.roadPaths.forEach(function(n){e=e.concat(t.getRoadPoints(n))}):this.props.roadPath&&(e=e.concat(this.getRoadPoints(this.props.roadPath))),e.length>0&&!1!==this.props.autoViewport&&this.props.map.setViewport(e,this.props.viewportOptions)}},{key:"getRoadGroup",value:function(t,e,n){var t=t,e=e,n=n,o={},i=[];if(e)for(var r=0;r<e.length;r++)o[e[r]]||(o[e[r]]={roadPath:[],color:n[e[r]]}),i.push(t[r]),o[e[r]].roadPath.push(t[r]);else o[0]={roadPath:t,color:this.props.color||"#1495ff"};return{group:o,allPath:d.default.mergeRoadPath(t)}}},{key:"isClick",value:function(t,e,n){var o=this.canvasLayer.canvas.getContext("2d"),i=this.getRoadGroup(n);o.beginPath();var r=this.props.lineWidth||10;return f.default.drawRoads(t,o,i.allPath,{color:this.props.bgColor||"#fff",lineWidth:r+4,lineCap:"butt",arrow:!1,line:!1}),o.lineWidth=r+6,o.isPointInStroke(e.x*window.devicePixelRatio,e.y*window.devicePixelRatio)}},{key:"initialize",value:function(){var t=this,e=this.props.map;if(e){var n=this.canvasLayerUpdate.bind(this);this.canvasLayer?this.canvasLayer.draw():(this.canvasLayer=new c.baiduMapCanvasLayer({zIndex:this.props.zIndex,map:e,update:function(){n(this)}}),this.props.onClick&&e.addEventListener("click",function(n){var o=!1;if(t.props.roadPaths)for(var i=0;i<t.props.roadPaths.length;i++){var r=t.props.roadPaths[i];o=t.isClick(e,n.pixel,r),o&&t.props.onClick(i)}else t.props.roadPath&&(o=t.isClick(e,n.pixel,t.props.roadPath))&&t.props.onClick()})),this.updateViewport()}}},{key:"canvasLayerUpdate",value:function(t){var e=this,n=t.canvas.getContext("2d");if(!n)return!1;n.clearRect(0,0,n.canvas.width,n.canvas.height);var o=this.props.roadPath,i=this.props.roadPaths,r=this.props.lineWidth||10;i?i.forEach(function(t,o){e.props.lineWidths&&(r=e.props.lineWidths[o]),e.drawRoad(n,t,e.props.category,e.props.splitList,r)}):o&&this.drawRoad(n,this.props.roadPath,this.props.category,this.props.splitList,r)}},{key:"drawRoad",value:function(t,e,n,o,i){var r=this.getRoadGroup(e,n,o),a=r.group;f.default.drawRoads(this.props.map,t,r.allPath,{color:this.props.bgColor||"#fff",coordType:this.props.coordType,lineWidth:i+4,lineCap:"butt",arrow:!1,line:!0});for(var s in a){var l=a[s],e=d.default.mergeRoadPath(l.roadPath);f.default.drawRoads(this.props.map,t,e,{color:l.color,coordType:this.props.coordType,line:!0,lineWidth:i,lineCap:"butt",arrow:!1})}f.default.drawRoads(this.props.map,t,r.allPath,{color:l.color,coordType:this.props.coordType,lineWidth:i,border:{},lineCap:"butt",arrow:!1!==this.props.isShowArrow&&{width:5,height:3,color:this.props.arrowColor}})}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.canvasLayer.hide()}}]),e}(u.default);e.default=y},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function r(t){if(p===clearTimeout)return clearTimeout(t);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){y&&h&&(y=!1,h.length?d=h.concat(d):g=-1,d.length&&s())}function s(){if(!y){var t=i(a);y=!0;for(var e=d.length;e;){for(h=d,d=[];++g<e;)h&&h[g].run();g=-1,e=d.length}h=null,y=!1,r(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var c,p,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(t){p=o}}();var h,d=[],y=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new l(t,e)),1!==d.length||y||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={0:"#fff",1:"#00dc35",2:"#f3e032",3:"#ff6c6c",4:"#900000"},i={drawRoads:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=t.getZoom(),a=i.lineWidth||5,s=void 0===i.level?1:i.level,l=null,u=0,c=0,p=[],f=[],h=[],d=0,y=0;e.beginPath();var g,v=Math.pow(2,18-t.getZoom()),m=t.getMapType().getProjection(),b=m.lngLatToPoint(t.getCenter()),w=new BMap.Pixel(b.x-t.getSize().width/2*v,b.y+t.getSize().height/2*v);return n.forEach(function(n,o){var r=null;l=null;for(var a=n.split(","),s=0;s<a.length;s+=2){var m=new BMap.Point(a[s],a[s+1]);f.push(m),g="bd09mc"===i.coordType?{x:(m.lng-w.x)/v,y:(w.y-m.lat)/v}:t.pointToPixel(m);var b=void 0;if(l){var _=g.x-l.x,x=g.y-l.y;u=Math.sqrt(_*_+x*x),c+=u,i.arrow&&(d+=u,y+=u,b={start:l,end:g,offset:50-(d-u),depth:u,totalDepth:y},p.push(b),d>=50&&(h.push(b),d%=50))}l=g,0===s?(r=r||g,e.moveTo(g.x,g.y)):(c>15||s>=a.length-2)&&(c=0,e.lineTo(g.x,g.y))}if(i.arrow&&o===n.length-1&&y<100){var O=p[Math.ceil(p.length/2)];for(var P in p)if(p[P].totalDepth>=y/2){O=p[P+1]?p[P+1]:p[P];break}var M=p[p.length-1];O.end=M.end,h=[],h.push(O)}}),i.line&&(e.lineCap=i.lineCap||"round",e.lineJoin="round",i.border&&(e.strokeStyle=i.border.color||"white",e.lineWidth=(r<=13?a-2:a)+(2*i.border.lineWidth||4),e.stroke()),e.strokeStyle=i.color||o[s]||"#fc2c2b",e.lineWidth=r<=13?a-2:a,e.stroke()),i.arrow&&this.drawArrow(e,h,i),f},drawArrow:function(t,e,n){t.beginPath(),e.forEach(function(o){var i=o.start.x,r=o.start.y,a=o.end.x,s=o.end.y,l=a-i,u=s-r,c=[0,-1],p=[o.end.x-o.start.x,o.end.y-o.start.y],f=c[0]*p[0]+c[1]*p[1],h=Math.sqrt(c[0]*c[0]+c[1]*c[1]),d=Math.sqrt(p[0]*p[0]+p[1]*p[1]),y=Math.acos(f/(h*d));p[0]<0&&(y=2*Math.PI-y);for(var g=n.arrow.width/2||2,v=n.arrow.height||g,m=0;o.offset+50*m<=o.depth;){var b=o.offset+50*m,w=b/o.depth;t.save(),t.translate(i+l*w,r+u*w),t.rotate(y),t.moveTo(1.618*-g,v),t.lineTo(0,0),t.lineTo(1.618*g,v),t.restore(),m+=1}1===e.length&&o.offset>o.depth&&(t.save(),t.translate(i,r),t.rotate(y),t.moveTo(1.618*-g,v),t.lineTo(0,0),t.lineTo(1.618*g,v),t.restore())}),t.strokeStyle=n.arrow.color||"#fff",t.lineWidth=3,t.stroke()}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={mergeRoadPath:function(t,e){for(var n=[],o=0;o<t.length;o++)if(0==n.length)n.push(t[o]);else{var i=t[o].split(","),r=n[n.length-1].split(",");if(i[0]===r[r.length-2]&&i[1]===r[r.length-1]){var a=i.slice(2);n[n.length-1]+=","+a.join(",")}else n.push(t[o])}return n},uniqueRoadPath:function(t){for(var e=0;e<t.length-1;e++)if(t[e])for(var n=t[e].split(","),o=e+1;o<t.length;o++)if(t[o]){for(var i=t[o].split(","),r=!0,a=0;a<i.length;a+=2){var s=this.isPointOnPolyline({lng:i[a],lat:i[a+1]},n);0==s&&(r=!1)}r&&delete t[o]}return t},isPointOnPolyline:function(t,e){for(var n=e,o=0;o<n.length-2;o++){var i={lng:n[o],lat:n[o+1]},r={lng:n[o+2],lat:n[o+3]};if(t.lng>=Math.min(i.lng,r.lng)&&t.lng<=Math.max(i.lng,r.lng)&&t.lat>=Math.min(i.lat,r.lat)&&t.lat<=Math.max(i.lat,r.lat)){var a=(i.lng-t.lng)*(r.lat-t.lat)-(r.lng-t.lng)*(i.lat-t.lat),s=2e-10;if(s=2e-9,a<s&&a>-s)return!0}}return!1}};e.default=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=n(2),c=function(t){function e(t){o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return r(e,t),a(e,[{key:"componentDidUpdate",value:function(t){this.initialize()}},{key:"componentDidMount",value:function(){this._allRequest={},this._backData={},this.initialize()}},{key:"componentWillUnmount",value:function(){this.mapvLayer&&(this.mapvLayer.destroy(),this.mapvLayer=null)}},{key:"getPointArrayByDataSetData",value:function(t){for(var e=[],n=0;n<t.length;n++){t[n].geometry.coordinates[0].forEach(function(t){e.push(new BMap.Point(t[0],t[1]))})}return e}},{key:"getBoundaryData",value:function(){function t(){var t=!0;for(var e in o._request)o._request[e]||(t=!1);if(t){o.dataSet.set(r);var i=o.getPointArrayByDataSetData(r);i.length>0&&!1!==o.props.autoViewport&&n.setViewport(i,o.props.viewportOptions)}}var e=this.props.data,n=this.props.map;if(e){this._request={};var o=this,i=new BMap.Boundary,r=[];e.forEach(function(t,e){o._request[t.name]=!1,o._backData[t.name]&&(r=r.concat(o._backData[t.name]),o._request[t.name]=!0)}),t(),e.forEach(function(e,n){o._request[e.name]||o._allRequest[e.name]||(o._allRequest[e.name]=!0,i.get(e.name,function(n){for(var i=[],a=0;a<n.boundaries.length;a++){for(var s=[],l=n.boundaries[a].split(";"),u=0;u<l.length;u++)s.push(l[u].split(","));i.push({geometry:{type:"Polygon",coordinates:[s]},count:e.count})}o._backData[e.name]=i,r=r.concat(i),o._request[e.name]=!0,t()}))})}}},{key:"initialize",value:function(){var t=this.props.map;if(t){if(!this.mapvLayer){this.dataSet=new u.DataSet([]);var e=this.props.layerOptions||{gradient:{0:"yellow",1:"red"},max:100,globalAlpha:.8,draw:"intensity"};this.mapvLayer=new u.baiduMapLayer(t,this.dataSet,e)}this.getBoundaryData()}}}]),e}(l.default);e.default=c},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(0),u=o(l),c=n(2),p=n(36),f=o(p),h=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return a(e,t),s(e,[{key:"componentDidUpdate",value:function(t){JSON.stringify(t.data)==JSON.stringify(this.props.data)&&this.map?this.setViewport():this.initialize()}},{key:"componentDidMount",value:function(){this.markers=[],this.initialize()}},{key:"componentWillUnmount",value:function(){this.clearMarkers(),this.textLayer&&(this.textLayer.destroy(),this.textLayer=null),this.animationLayer&&(this.animationLayer.destroy(),this.animationLayer=null)}},{key:"clearMarkers",value:function(){for(var t=0;t<this.markers.length;t++)this.map.removeOverlay(this.markers[t]),this.markers[t]=null;this.markers.length=0}},{key:"initialize",value:function(){var t=this,e=this.props.map;if(e){if(this.map=e,this.clearMarkers(),!this.textLayer){this.dataSet=new c.DataSet([]);var n=this.props.textOptions||{fillStyle:"#666666",shadowBlur:5,shadowColor:"rgba(0, 0, 0, 0.1)",globalAlpha:"0.9",textAlign:"left",offset:{x:15,y:0},coordType:this.props.coordType,avoid:!0,size:12,textKey:"text",draw:"text"};!1!==this.props.isShowText&&(this.textLayer=new c.baiduMapLayer(e,this.dataSet,n))}if(!this.animationLayer&&!0===this.props.animation){var o=this.props.splitList||{};o.other=this.props.fillStyle||"rgba(50, 50, 255, 0.5)";var i={styleType:"stroke",strokeStyle:this.props.fillStyle||"rgba(20, 249, 255, 0.5)",coordType:this.props.coordType,splitList:o,globalAlpha:.4,size:this.props.multiple?20:26,minSize:this.props.multiple?10:13,draw:"category"};this.animationLayer=new c.baiduMapAnimationLayer(e,this.dataSet,i)}for(var r=e.getMapType().getProjection(),a=this.props.data,s=[],l=0;l<a.length;l++)if((void 0===this.props.showIndex||this.props.showIndex==l)&&a[l].location){var u=a[l].location.split(",");if(this.props.coordType&&"bd09mc"===this.props.coordType)var p=r.pointToLngLat(new BMap.Pixel(u[0],u[1]));else var p=new BMap.Point(u[0],u[1]);var h=a[l].color||this.props.fillStyle||"#1495ff";this.props.splitList&&(h=this.props.splitList[a[l].count]?this.props.splitList[a[l].count]:this.props.splitList.other);var n={point:p,fillStyle:h,isShowShadow:this.props.isShowShadow,size:26,zIndex:a.length-l,number:l+1};this.props.multiple&&(n.size=20,n.lineWidth=0,l>=10&&(n.isShowNumber=!1,n.size=10,n.strokeStyle=h,n.lineWidth=3,n.strokeOpacity=.4));var d=new f.default(n);d.addEventListener("click",function(e,n){t.props.onClick&&t.props.onClick(n-1)}),d.addEventListener("mouseover",function(e,n){t.props.onMouseOver&&t.props.onMouseOver(n-1)}),d.addEventListener("mouseout",function(e,n){t.props.onMouseOut&&t.props.onMouseOut(n-1)}),d.index=l,this.markers.push(d),s.push({geometry:{type:"Point",coordinates:[u[0],u[1]]},count:a[l].count,text:a[l].text})}for(var y=this.markers.length;y--;)e.addOverlay(this.markers[y]);this.dataSet.set(s.splice(0,10)),this.setViewport()}}},{key:"setViewport",value:function(){var t=this.props.map;if(t){for(var e=this.props.data,n=t.getMapType().getProjection(),o=[],i=0;i<e.length;i++)if(e[i].location){var r=e[i].location.split(",");if(this.props.coordType&&"bd09mc"===this.props.coordType)var a=n.pointToLngLat(new BMap.Pixel(r[0],r[1]));else var a=new BMap.Point(r[0],r[1]);o.push(a)}o.length>0&&!1!==this.props.autoViewport&&t.setViewport(o,this.props.viewportOptions)}}}],[{key:"defaultProps",get:function(){return{autoViewport:!0}}}]),e}(u.default);e.default=h},function(t,e,n){"use strict";function o(t){this.options=t||{},this._point=t.point,this._fillColor=t.fillStyle||"#1495ff",this._size=t.size||30,this._lineWidth=void 0===t.lineWidth?2:t.lineWidth,this._strokeStyle=t.strokeStyle||"#ffffff",t.strokeOpacity&&(this._strokeStyle=i(this._strokeStyle,.4))}function i(t,e){var n=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,o=t.toLowerCase();if(o&&n.test(o)){if(4===o.length){for(var i="#",r=1;r<4;r+=1)i+=o.slice(r,r+1).concat(o.slice(r,r+1));o=i}for(var a=[],r=1;r<7;r+=2)a.push(parseInt("0x"+o.slice(r,r+2)));return e?(a.push(e),"rgba("+a.join(",")+")"):"rgb("+a.join(",")+")"}return o}Object.defineProperty(e,"__esModule",{value:!0}),o.prototype=new BMap.Overlay,o.prototype.initialize=function(t){this._map=t;var e=this._div=document.createElement("div"),n=e.style;n.position="absolute",n.backgroundClip="padding-box",n.zIndex=this.options.zIndex||BMap.Overlay.getZIndex(this._point.lat),n.backgroundColor=this._fillColor,!1!==this.options.isShowShadow&&(n.boxShadow="0 0 5px rgba(0, 0, 0, 0.5)"),n.border=this._lineWidth+"px solid "+this._strokeStyle,n.color="white",n.textShadow="0px 0px 5px #fff",n.width=this._size+"px",n.boxSizing="content-box",n.borderRadius="30px",n.height=this._size+"px",n.lineHeight=this._size+"px",n.fontSize="12px",n.cursor="pointer",n.textAlign="center",n.MozUserSelect="none",this.options.number&&!1!==this.options.isShowNumber&&(e.innerHTML=this.options.number);var o=this;return e.addEventListener("mouseover",function(){o.dispatchEvent("mouseover",o.options.number),n.backgroundColor="#1495ff"}),e.addEventListener("mouseout",function(){o.dispatchEvent("mouseout",o.options.number),n.backgroundColor=o._fillColor}),e.addEventListener("click",function(){o.dispatchEvent("click",o.options.number)}),t.getPanes().markerPane.appendChild(e),e},o.prototype.draw=function(){var t=this._map,e=t.pointToOverlayPixel(this._point);this._div.style.left=e.x-(this._size+this._lineWidth)/2+1+"px",this._div.style.top=e.y-(this._size+this._lineWidth)/2+"px"},e.default=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=n(2),c=function(t){function e(t){o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return r(e,t),a(e,[{key:"handleClick",value:function(t){this.props.onClick&&this.props.onClick(t)}},{key:"componentDidUpdate",value:function(t){JSON.stringify(t.data)==JSON.stringify(this.props.data)&&this.map||this.initialize()}},{key:"initialize",value:function(){var t=this.props.map;t&&(this.map=t,this._createLayer||this.createLayers(),this.showDatasets(this.props.data))}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.shadowSet=null,this.circleSet=null,this.textSet=null,this.numSet=null,this.otherSet=null,this.otherShadowSet=null;for(var t=0;t<this.layers.length;t++)this.layers[t].destroy(),this.layers[t]=null}},{key:"showDatasets",value:function(t){var e=this,n=[],o=[],i=[],r=[],a=[],s=[];t.length>0&&(t.forEach(function(t,l){var u=t.location.split(","),c=e.project.pointToLngLat(new BMap.Pixel(u[0],u[1]));s.push(c),l<10?(n.push({geometry:{type:"Point",coordinates:[u[0],u[1]]},count:parseInt(t.count)}),o.push({geometry:{type:"Point",coordinates:[u[0],u[1]]},id:l,count:parseInt(t.count),text:parseInt(l)+1}),i.push({geometry:{type:"Point",coordinates:[u[0],u[1]]},count:parseInt(t.count),text:t.text})):(r.push({geometry:{type:"Point",coordinates:[u[0],u[1]]},id:l,count:parseInt(t.count)}),a.push({geometry:{type:"Point",coordinates:[u[0],u[1]]},count:parseInt(t.count)}))}),this.shadowSet.set(n),this.circleSet.set(o),this.textSet.set(i),this.numSet.set(o),this.otherSet.set(r),this.otherShadowSet.set(a),s.length>0&&!1!==this.props.autoViewport&&map.setViewport(s,self.props.viewportOptions))}},{key:"createLayers",value:function(){this._createLayer=!0;var t=this.map;this.project=t.getMapType().getProjection();var e=this,n=this.shadowSet=new u.DataSet([]),o=this.circleSet=new u.DataSet([]),i=this.textSet=new u.DataSet([]),r=this.numSet=new u.DataSet([]),a=this.otherSet=new u.DataSet([]),s=this.otherShadowSet=new u.DataSet([]);this.layers=[];var l={coordType:"bd09mc",splitList:{4:"#d53938",3:"#fe6261",2:"#ffb02d",other:"#80db69"},shadowBlur:10,size:5,max:30,methods:{click:function(t){t&&e.handleClick(t.id)},mousemove:function(t){a.update(function(t){t.fillStyle=null}),t?(e.isSmallPath=!0,e.props.map.setDefaultCursor("pointer"),a.update(function(t){t.fillStyle="#1495ff"},{id:t.id})):(e.isSmallPath=!1,e.isSmallPath||e.isBigPath||e.props.map.setDefaultCursor("auto"))}},draw:"category"},c={splitList:{4:"#d53938",3:"#fe6261",2:"#ffb02d",1:"#80db69"},styleType:"fill",globalAlpha:.4,coordType:"bd09mc",size:8,minSize:5,draw:"category"};if(this.layers.push(new u.baiduMapLayer(t,s,c)),this.layers.push(new u.baiduMapLayer(t,a,l)),!0===this.props.animation){var p={splitList:{4:"#d53938",3:"#fe6261",2:"#ffb02d",1:"#80db69"},styleType:"stroke",globalAlpha:.4,coordType:"bd09mc",size:20,minSize:10,draw:"category"};this.layers.push(new u.baiduMapAnimationLayer(t,n,p))}var f={splitList:{1:"#80db69",4:"#d53938",3:"#fe6261",2:"#ffb02d"},fillStyle:"red",coordType:"bd09mc",size:10,draw:"category",methods:{click:function(t){t&&e.handleClick(t.id)},mousemove:function(t){o.update(function(t){t.fillStyle=null}),t?(e.isBigPath=!0,e.map.setDefaultCursor("pointer"),o.update(function(t){t.fillStyle="#1495ff"},{id:t.id})):(e.isBigPath=!1,e.isBigPath||e.isSmallPath||e.map.setDefaultCursor("auto"))}}};this.layers.push(new u.baiduMapLayer(t,o,f));var h={coordType:"bd09mc",draw:"text",font:"13px Arial",fillStyle:"#ffffff",shadowColor:"#ffffff",shadowBlur:10};this.layers.push(new u.baiduMapLayer(t,r,h));var d={coordType:"bd09mc",font:"13px Arial",fillStyle:"#666",shadowColor:"#ffffff",shadowBlur:10,draw:"text",avoid:!0,textAlign:"left",offset:{x:10,y:0}};this.layers.push(new u.baiduMapLayer(t,i,d))}},{key:"render",value:function(){return null}}],[{key:"defaultProps",get:function(){return{autoViewport:!0}}}]),e}(l.default);e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return r(e,t),a(e,[{key:"componentDidUpdate",value:function(t){this.initialize()}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.props.map.removeTileLayer(this.tileLayer),this.tileLayer=null}},{key:"initialize",value:function(){var t=this.props.map;if(t){if(!this.tileLayer){this.tileLayer=new BMap.TileLayer({isTransparentPng:!0});var e=Math.round(window.devicePixelRatio||1);e=Math.min(2,e),e=Math.max(1,e),this.tileLayer.getTilesUrl=function(t,n){return"http://its.map.baidu.com:8002/traffic/TrafficTileService?level="+n+"&x="+t.x+"&y="+t.y+"&time="+(new Date).getTime()+"&v=081&scaler="+e}}t.addTileLayer(this.tileLayer)}}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t){this.polyline=t;for(var e=t[0],n=t[0],o=t[1],i=t[1],r=2;r<t.length;r+=2)e=Math.min(e,t[r]),n=Math.max(n,t[r]),o=Math.min(o,t[r+1]),i=Math.max(i,t[r+1]);this.minX=e,this.maxX=n,this.minY=o,this.maxY=i}Object.defineProperty(e,"__esModule",{value:!0});var i={mergeRoadPath:function(t,e){if(t){for(var n=[],o=0;o<t.length;o++)if(0==n.length)n.push(t[o]);else{for(var i=t[o].split(","),r=!1,a=0;a<n.length;a++){var s=n[a].split(",");if(i[0]===s[s.length-2]&&i[1]===s[s.length-1]){var l=i.slice(2);n[a]+=","+l.join(","),r=!0}if(i[i.length-2]===s[0]&&i[i.length-1]===s[1]){var l=i.slice(0,i.length-2);n[a]=l.join(",")+","+n[a],r=!0}}!1===r&&n.push(t[o])}return n=this.uniqueRoadPath(n)}},uniqueRoadPath:function(t){for(var e=t.map(function(t){return new o(t.split(","))}),n=0;n<e.length-1;n++)if(e[n])for(var i=e[n],r=n+1;r<e.length;r++)if(e[r]){var a=e[r];a.isInclude(i)&&delete e[r]}var s=[];return e.map(function(t){t&&s.push(t.getPoints().join(","))}),s}};o.prototype.getPoints=function(){return this.polyline},o.prototype.isInBound=function(t){return t.lng>this.minX&&t.lat>this.minY&&t.lng<this.maxX&&t.lat<this.maxY},o.prototype.isInclude=function(t){if(!(t.minX>this.minX&&t.minY>this.minY&&t.maxX<this.maxX&&t.maxY<this.maxY))return!1;for(var e=this.getPoints(),n=!0,o=0;o<e.length;o+=2){0==this.isPointOnPolyline({lng:e[o],lat:e[o+1]},t)&&(n=!1)}return n},o.prototype.isPointOnPolyline=function(t,e){var n=e.getPoints();if(!e.isInBound(t))return!1;for(var o=0;o<n.length-2;o++){var i={lng:n[o],lat:n[o+1]},r={lng:n[o+2],lat:n[o+3]};if(t.lng>=Math.min(i.lng,r.lng)&&t.lng<=Math.max(i.lng,r.lng)&&t.lat>=Math.min(i.lat,r.lat)&&t.lat<=Math.max(i.lat,r.lat)){var a=(i.lng-t.lng)*(r.lat-t.lat)-(r.lng-t.lng)*(i.lat-t.lat),s=2e-10;if(s=2e-9,a<s&&a>-s)return!0}}return!1},e.default=i},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=n(2),c=function(t){function e(t){o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return r(e,t),a(e,[{key:"handleClick",value:function(t){this.props.onClick&&this.props.onClick(t)}},{key:"componentDidUpdate",value:function(t){JSON.stringify(t.data)==JSON.stringify(this.props.data)&&this.map||this.initialize()}},{key:"initialize",value:function(){var t=this,e=this.props.map;if(e){if(this.map=e,this._createLayer||this.createLayers(),this.props.options.autoViewport){var n=function(e){return"bd09mc"===t.props.options.coordType?o.pointToLngLat(new BMap.Pixel(e[0],e[1])):new BMap.Point(e[0],e[1])},o=e.getMapType().getProjection(),i=[];this.props.data.map(function(t){"Point"===t.geometry.type?i.push(n(t.geometry.coordinates)):"Polygon"===t.geometry.type&&t.geometry.coordinates[0].map(function(t){i.push(n(t))})}),e.setViewport(i,this.props.options.viewportOptions)}this.dataSet.set(this.props.data),this.layer.update({options:this.props.options})}}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.layer.destroy(),this.layer=null}},{key:"createLayers",value:function(){this._createLayer=!0;var t=this.map,e=this.dataSet=new u.DataSet([]);this.layer=new u.baiduMapLayer(t,e,{})}}],[{key:"defaultProps",get:function(){return{}}}]),e}(l.default);e.default=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(s),u=function(t){function e(t){o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return r(e,t),a(e,[{key:"componentDidUpdate",value:function(t){this.initialize()}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"destroy",value:function(){this.driving&&this.driving.clearResults(),this.driving=null}},{key:"initialize",value:function(){var t=this.props.map;if(t){this.destroy(),this.driving||(this.driving=new BMap.DrivingRoute(t,{renderOptions:{map:t,policy:this.props.policy||BMAP_DRIVING_POLICY_LEAST_TIME,autoViewport:!0}}));var e=this.props.start,n=this.props.end;e.lng&&e.lat&&(e=new BMap.Point(e.lng,e.lat)),n.lng&&n.lat&&(n=new BMap.Point(n.lng,n.lat)),this.driving.search(e,n)}}}],[{key:"defaultProps",get:function(){return{}}}]),e}(l.default);e.default=u},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=(o(l),n(6),n(0)),c=o(u),p=n(43),f=o(p),h=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n.tips=[],n}return a(e,t),s(e,[{key:"componentDidUpdate",value:function(t){this.initialize()}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"destroy",value:function(){this.tips.forEach(function(t){t.hide()}),this.tips=[]}},{key:"initialize",value:function(){var t=this,e=this.props.map;if(e&&(this.destroy(),this.props.data)){var n=[];this.props.data.forEach(function(o,i){var r=new f.default({isShowTipArrow:!0,changePosition:function(e){t.props.changePosition&&t.props.changePosition(e,i)},map:e,numberDirection:o.numberDirection,isShowNumber:o.isShowNumber,point:o.point,name:o.name,index:void 0!==o.index?o.index:i+1,color:o.color,change:function(){}});n.push(o.point),r.show(),t.tips.push(r)}),this.props.autoViewport&&e.setViewport(n,this.props.viewportOptions)}}}],[{key:"defaultProps",get:function(){return{}}}]),e}(c.default);e.default=h},function(t,e,n){"use strict";function o(t){this.options=t;var e=t.map,n=t.point;this.point=n;t.name;this.map=e;var o=this.tip=new r.default(t),i=new BMap.Icon("//huiyan.baidu.com/github/tools/gis-drawing/static/images/drag.png",new BMap.Size(25,25),{imageSize:new BMap.Size(25,25)}),a=this.marker=new BMap.Marker(this.point);a.setIcon(i),a.setShadow(i);var s=this;a.addEventListener("dragging",function(){s.point=a.point,o.setPosition(a.point),t.change&&t.change()}),a.addEventListener("dragend",function(){t.changePosition&&t.changePosition(s.point)}),a.enableDragging()}Object.defineProperty(e,"__esModule",{value:!0});var i=n(44),r=function(t){return t&&t.__esModule?t:{default:t}}(i);o.prototype.show=function(){this.map.addOverlay(this.marker),this.map.addOverlay(this.tip),!1===this.options.isShowTipArrow&&this.tip.hideArrow()},o.prototype.hide=function(){this.map.removeOverlay(this.marker),this.map.removeOverlay(this.tip)},o.prototype.setNumberLeft=function(){this.tip.setNumberLeft()},o.prototype.setNumberRight=function(){this.tip.setNumberRight()},o.prototype.hideNumber=function(){this.tip.hideNumber()},e.default=o},function(t,e,n){"use strict";function o(t){t=t||{},this._point=t.point,this._text=t.name,this._index=t.index,this._numberDirection=t.numberDirection||"left",this._isShowNumber=void 0===t.isShowNumber||t.isShowNumber,this.color=t.color||"#ee5d5b"}Object.defineProperty(e,"__esModule",{value:!0});var i={"#ee5d5b":"0 0","#ff9625":"0 -10px","#6caeca":"0 -20px"},r={"#ee5d5b":"#BC3B3A","#ff9625":"#c57f1d","#6caeca":"#5188a5"};o.prototype=new BMap.Overlay,o.prototype.changeColor=function(t){this._div&&(this._div.style.backgroundColor=t,this._div.style.borderColor=r[t],this._arrow.style.backgroundPosition=i[t])},o.prototype.initialize=function(t){this._map=t;var e=this._div=document.createElement("div");e.style.position="absolute",e.style.zIndex=BMap.Overlay.getZIndex(this._point.lat),e.style.backgroundColor=this.color,e.style.border="1px solid "+r[this.color],e.style.color="white",e.style.height="38px",e.style.boxSizing="border-box",e.style.padding="5px",e.style.whiteSpace="nowrap",e.style.MozUserSelect="none",e.style.fontSize="18px",e.style.border="1px solid #a67972",e.style.color="#494947",e.style.background="#fff",e.style.borderRadius="25px",e.style.paddingLeft="30px";var n=this._span=document.createElement("span");e.appendChild(n),n.appendChild(document.createTextNode(this._text));var o=this._arrow=document.createElement("div");o.style.backgroundPosition=i[this.color],o.style.position="absolute",o.style.width="11px",o.style.height="10px",o.style.top="26px",o.style.left="10px",o.style.overflow="hidden",e.appendChild(o);var a=this._number=document.createElement("div");return a.style.background=this.color||"#f15e5c",a.style.color="#fff",a.style.position="absolute",a.style.top="3px",a.style.position="absolute",a.style.textAlign="center",a.style.height="30px",a.style.width="30px",a.style.lineHeight="30px",a.style.borderRadius="30px",!1===this._isShowNumber&&(a.style.display="none"),this.renderDirection(),a.innerHTML=this._index,e.appendChild(a),t.getPanes().labelPane.appendChild(e),e},o.prototype.setNumberLeft=function(){this._numberDirection="left",this.renderDirection()},o.prototype.setNumberRight=function(){this._numberDirection="right",this.renderDirection()},o.prototype.renderDirection=function(){"left"==this._numberDirection?(this._isShowNumber?this._div.style.paddingLeft="38px":this._div.style.paddingLeft="8px",this._div.style.paddingRight="8px",this._number.style.left="5px",this._number.style.right="initial"):(this._div.style.paddingLeft="8px",this._isShowNumber?this._div.style.paddingRight="38px":this._div.style.paddingRight="8px",this._number.style.left="initial",this._number.style.right="5px")},o.prototype.hideNumber=function(){this._isShowNumber=!1,this._number.style.display="none",this.renderDirection()},o.prototype.setPosition=function(t){this._point=t,this.draw()},o.prototype.hideArrow=function(){this._arrow.style.display="none"},o.prototype.draw=function(){var t=this._map;this._span.innerHTML=this._text;var e=t.pointToOverlayPixel(this._point);this._div.style.left=e.x+5+"px",this._div.style.top=e.y-20+"px"},e.default=o},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=(o(l),n(0)),c=o(u),p=n(2),f=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return a(e,t),s(e,[{key:"componentDidUpdate",value:function(t){this.initialize()}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"destroy",value:function(){this.lineLayer.destroy(),this.lineLayer=null,this.pointLayer.destroy(),this.pointLayer=null,this.textLayer.destroy(),this.textLayer=null}},{key:"createLayers",value:function(){this._createLayer=!0;var t=this.map;this.lineDataSet=new p.DataSet([]),this.lineLayer=new p.baiduMapLayer(t,this.lineDataSet,{}),this.pointDataSet=new p.DataSet([]),this.pointLayer=new p.baiduMapLayer(t,this.pointDataSet,{}),this.textLayer=new p.baiduMapLayer(t,this.pointDataSet,{}),this.props.enableAnimation&&(this.animationLayer=new p.baiduMapAnimationLayer(t,this.lineDataSet,{}))}},{key:"initialize",value:function(){var t=this,e=this.map=this.props.map;if(e){this._createLayer||this.createLayers();var n=[],o=[];if(this.props.data){var i=[],r=e.getMapType().getProjection();this.props.data.forEach(function(a,s){var l=a.from.point||p.utilCityCenter.getCenterByCityName(a.from.city),u=a.to.point||p.utilCityCenter.getCenterByCityName(a.to.city),c=p.utilCurve.getPoints([l,u]);"bd09mc"===t.props.coordType?(i.push(r.pointToLngLat(new BMap.Pixel(l.lng,l.lat))),i.push(r.pointToLngLat(new BMap.Pixel(u.lng,u.lat)))):(i.push(l),i.push(u)),n.push({strokeStyle:a.color,geometry:{type:"LineString",coordinates:c}}),!1!==t.props.showToPoint&&o.push({fillStyle:a.color,text:a.to.name||a.to.city,geometry:{type:"Point",coordinates:[u.lng,u.lat]}}),!1!==t.props.showFromPoint&&o.push({fillStyle:a.color,text:a.from.name||a.from.city,geometry:{type:"Point",coordinates:[l.lng,l.lat]}}),i.length>0&&!1!==t.props.autoViewport&&e.setViewport(i,t.props.viewportOptions)})}this.lineDataSet.set(n),this.lineLayer.update({options:this.props.lineOptions||{draw:"simple",strokeStyle:"#5E87DB",lineWidth:3}}),this.pointDataSet.set(o),this.pointLayer.update({options:this.props.pointOptions||{coordType:this.props.coordType,draw:"simple",fillStyle:"#5E87DB",size:5}}),this.textLayer.update({options:this.props.textOptions||{coordType:this.props.coordType,draw:"text",font:"18px Arial",offset:{x:0,y:12},fillStyle:"#333",size:12}}),this.props.enableAnimation?this.animationLayer.update({options:this.props.animationOptions||{coordType:this.props.coordType,fillStyle:"rgba(255, 250, 250, 0.9)",lineWidth:0,size:4,animateTime:50,draw:"simple"}}):this.animationLayer&&this.animationLayer.hide()}}}],[{key:"defaultProps",get:function(){return{}}}]),e}(c.default);e.default=f},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(1),u=(o(l),n(0)),c=o(u),p=n(2),f=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return a(e,t),s(e,[{key:"componentDidUpdate",value:function(t){this.initialize()}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"destroy",value:function(){this.lineLayer.destroy(),this.lineLayer=null,this.pointLayer.destroy(),this.pointLayer=null,this.textLayer.destroy(),this.textLayer=null}},{key:"createLayers",value:function(){this._createLayer=!0;var t=this.map;this.lineDataSet=new p.DataSet([]),this.lineLayer=new p.baiduMapLayer(t,this.lineDataSet,{}),this.pointDataSet=new p.DataSet([]),this.pointLayer=new p.baiduMapLayer(t,this.pointDataSet,{}),this.textLayer=new p.baiduMapLayer(t,this.pointDataSet,{})}},{key:"initialize",value:function(){var t=this,e=this.map=this.props.map;if(e){this._createLayer||this.createLayers();var n=[],o=[];if(this.props.data){var i=[],r=e.getMapType().getProjection();this.props.data.forEach(function(a,s){var l=a.from.point||p.utilCityCenter.getCenterByCityName(a.from.city),u=a.to.point||p.utilCityCenter.getCenterByCityName(a.to.city);"bd09mc"===t.props.coordType?(i.push(r.pointToLngLat(new BMap.Pixel(l.lng,l.lat))),i.push(r.pointToLngLat(new BMap.Pixel(u.lng,u.lat)))):(i.push(l),i.push(u));var c=new p.utilDataRangeIntensity({maxSize:10,minSize:1,min:t.props.min||0,max:t.props.max||1e3}),f=c.getSize(a.count);n.push({strokeStyle:a.color,geometry:{type:"LineString",coordinates:[[l.lng,l.lat],[u.lng,u.lat]]},count:a.count,lineWidth:f}),!1!==t.props.showToPoint&&o.push({fillStyle:a.color,text:a.to.name||a.to.city,geometry:{type:"Point",coordinates:[u.lng,u.lat]}}),!1!==t.props.showFromPoint&&o.push({fillStyle:a.color,text:a.from.name||a.from.city,geometry:{type:"Point",coordinates:[l.lng,l.lat]}}),i.length>0&&!1!==t.props.autoViewport&&e.setViewport(i,t.props.viewportOptions)})}this.lineDataSet.set(n),this.lineLayer.update({options:this.props.lineOptions||{coordType:this.props.coordType,draw:"simple",strokeStyle:"#5E87DB",globalCompositeOperation:"lighter",shadowColor:"rgba(255, 255, 255, 0.5)",shadowBlur:60,lineWidth:2}}),this.pointDataSet.set(o),this.pointLayer.update({options:this.props.pointOptions||{coordType:this.props.coordType,draw:"simple",fillStyle:"#5E87DB",size:5,shadowColor:"#5E87DB",shadowBlur:20}}),this.textLayer.update({options:this.props.textOptions||{coordType:this.props.coordType,draw:"text",font:"18px Arial",offset:{x:0,y:12},fillStyle:"#333",size:12}})}}}],[{key:"defaultProps",get:function(){return{}}}]),e}(c.default);e.default=f}])});